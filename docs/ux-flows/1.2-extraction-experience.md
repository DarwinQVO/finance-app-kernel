# UX Flow 1.2: Extraction Experience

**Version**: 1.0
**Last Updated**: 2025-10-23
**Related Vertical**: [1.2 Extraction](../verticals/1.2-extraction.md)

---

## Overview

Although parsing is an **automated backend process**, users still experience it through:
- Status updates (parsing â†’ parsed)
- Error messages (if parsing fails)
- Observation counts (how many transactions extracted)
- Logs (debugging, transparency)
- Manual retry (after errors)

This document specifies the user-facing experience of the extraction stage.

---

## User Journeys

### Journey 1: Happy Path (Successful Parse)

**Scenario:** User uploads valid bank statement, parser extracts 42 transactions

**Steps:**

1. **Upload completes** (from vertical 1.1)
   ```
   User sees: "Upload successful! Processing..."
   Status: queued_for_parse
   ```

2. **Parsing starts** (automatic, ~2-5 seconds later)
   ```
   User sees: Status changes to "Parsing..."
   UI shows: Spinner animation
   Status: parsing
   ```

3. **Parsing completes** (automatic, ~3-30 seconds later)
   ```
   User sees: "âœ“ Parsed: 42 transactions extracted"
   Status: parsed
   Next action: "View Transactions" button enabled
   ```

4. **User drills down** (optional)
   ```
   Click "View Details" â†’ Shows:
   - Parser used: bofa_pdf_parser v1.2.0
   - Duration: 3.4s
   - Rows extracted: 42
   - Warnings: None
   - Link to ParseLog
   ```

**Timeline:**
```
Upload â†’ [2s wait] â†’ Parsing starts â†’ [3s parsing] â†’ Parsed
   â†“                       â†“                            â†“
  UI: "Processing..."    "Parsing..."          "âœ“ 42 transactions"
```

---

### Journey 2: Error - Corrupted PDF

**Scenario:** User uploads corrupted/unreadable PDF

**Steps:**

1. **Upload completes** (file accepted)
   ```
   User sees: "Upload successful! Processing..."
   Status: queued_for_parse
   ```

2. **Parsing starts**
   ```
   User sees: "Parsing..."
   Status: parsing
   ```

3. **Parsing fails** (automatic)
   ```
   User sees:
   âœ— Parsing failed: PDF file is corrupted or unreadable

   Status: error
   Error code: PDF_CORRUPT

   Actions available:
   [View Error Details] [Retry] [Upload Different File]
   ```

4. **User views error details** (optional)
   ```
   Modal shows:
   - Error: PDF_CORRUPT
   - Message: "Failed to open PDF: Invalid header at byte 0"
   - ParseLog: /logs/parse/UL_def456.log.json
   - Suggestion: "Try re-downloading the statement from your bank"
   ```

5. **User retries** (manual trigger)
   ```
   Click [Retry] â†’ Status returns to queued_for_parse
   Parser re-runs (full flow repeats)
   ```

**Error UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ— Upload: statement_jan.pdf                 â”‚
â”‚                                             â”‚
â”‚ Status: Parsing failed                      â”‚
â”‚ Error: PDF file is corrupted or unreadable  â”‚
â”‚                                             â”‚
â”‚ [View Error Details] [Retry] [Delete]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Journey 3: Empty Statement (0 Transactions)

**Scenario:** User uploads valid PDF but statement has no transactions (new account, zero activity)

**Steps:**

1. **Upload completes**
   ```
   Status: queued_for_parse
   ```

2. **Parsing completes successfully**
   ```
   User sees:
   âš  Parsed: 0 transactions found

   Status: parsed
   Warning: "No transactions found in this statement (empty account)"

   Actions: [View Details] [Upload Another]
   ```

3. **User views details** (optional)
   ```
   Shows:
   - Parser: bofa_pdf_parser v1.2.0
   - Rows extracted: 0
   - Warning: "No transactions found in statement (empty account)"
   - Severity: Medium
   - Note: "This is not an error - the statement may be from a new or inactive account"
   ```

**Important:** 0 transactions = **success, not error**

**UI Treatment:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš  Upload: new_account.pdf                   â”‚
â”‚                                             â”‚
â”‚ Status: Parsed successfully                 â”‚
â”‚ Transactions: 0 (empty statement)           â”‚
â”‚                                             â”‚
â”‚ This is normal for new/inactive accounts.   â”‚
â”‚                                             â”‚
â”‚ [View Details] [Upload Another]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Journey 4: Layout Mismatch (Bank Changed Format)

**Scenario:** Bank updated statement format, parser can't extract

**Steps:**

1. **Parsing fails**
   ```
   User sees:
   âœ— Parsing failed: Statement format not recognized

   Error code: LAYOUT_MISMATCH
   Message: "This statement format is different from expected.
            The bank may have updated their PDF layout."

   Actions: [Report Issue] [Upload Different File]
   ```

2. **User reports issue** (optional)
   ```
   Click [Report Issue] â†’ Pre-filled form:
   - Upload ID: UL_xyz789
   - Parser: bofa_pdf_parser v1.2.0
   - Error: LAYOUT_MISMATCH
   - Statement date: [user enters]
   - Comments: [user explains]

   Sends alert to admin: "Parser needs update"
   ```

**System response (behind scenes):**
- Alert sent to admin
- Issue tracked for parser update
- User notified when parser upgraded

---

## UI States & Components

### Status Badge Component

**States:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â³ Processing   â”‚  â† queued_for_parse (gray)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”„ Parsing...   â”‚  â† parsing (blue, animated)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Parsed        â”‚  â† parsed (green)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ— Failed        â”‚  â† error (red)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation:**
```typescript
<StatusBadge status={upload.status} />

// Renders:
// - Icon (â³, ğŸ”„, âœ“, âœ—)
// - Label ("Processing", "Parsing...", "Parsed", "Failed")
// - Color (gray, blue, green, red)
// - Animation (spinner for parsing)
```

---

### Upload List View

**Desktop wireframe:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Your Uploads                                          [Upload New +] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ statement_jan.pdf                         âœ“ Parsed            â”‚ â”‚
â”‚ â”‚ Uploaded: 2 minutes ago                      42 transactions     â”‚ â”‚
â”‚ â”‚ Parser: BofA PDF v1.2.0                      Duration: 3.4s      â”‚ â”‚
â”‚ â”‚                                                                   â”‚ â”‚
â”‚ â”‚ [View Transactions] [View Details] [Delete]                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ statement_feb.pdf                         ğŸ”„ Parsing...       â”‚ â”‚
â”‚ â”‚ Uploaded: 10 seconds ago                     Extracting data...  â”‚ â”‚
â”‚ â”‚ Parser: BofA PDF v1.2.0                                          â”‚ â”‚
â”‚ â”‚                                                                   â”‚ â”‚
â”‚ â”‚ [Cancel]                                                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ corrupted.pdf                             âœ— Failed            â”‚ â”‚
â”‚ â”‚ Uploaded: 5 minutes ago                      PDF_CORRUPT         â”‚ â”‚
â”‚ â”‚ Error: PDF file is corrupted or unreadable                       â”‚ â”‚
â”‚ â”‚                                                                   â”‚ â”‚
â”‚ â”‚ [View Error Details] [Retry] [Delete]                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Mobile wireframe:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Your Uploads              â”‚
â”‚                 [+ New]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ statement_jan.pdf  â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ âœ“ Parsed              â”‚ â”‚
â”‚ â”‚ 42 transactions       â”‚ â”‚
â”‚ â”‚ 2 min ago            â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ [View] [Details]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ statement_feb.pdf  â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ ğŸ”„ Parsing...         â”‚ â”‚
â”‚ â”‚ Extracting...         â”‚ â”‚
â”‚ â”‚ 10s ago              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ corrupted.pdf      â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ âœ— Failed              â”‚ â”‚
â”‚ â”‚ PDF_CORRUPT           â”‚ â”‚
â”‚ â”‚ 5 min ago            â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚
â”‚ â”‚ [Retry] [Details]     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Parse Details Modal

**Triggered by:** Click "View Details" on any upload

**Content (success case):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parse Details: statement_jan.pdf               [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ Status: âœ“ Parsed successfully                      â”‚
â”‚                                                     â”‚
â”‚ Parser Information:                                 â”‚
â”‚   â€¢ Parser ID: bofa_pdf_parser                     â”‚
â”‚   â€¢ Version: 1.2.0                                 â”‚
â”‚   â€¢ Started: 2025-10-23 14:30:00 UTC              â”‚
â”‚   â€¢ Completed: 2025-10-23 14:30:03 UTC            â”‚
â”‚   â€¢ Duration: 3.4 seconds                          â”‚
â”‚                                                     â”‚
â”‚ Results:                                            â”‚
â”‚   â€¢ Transactions extracted: 42                     â”‚
â”‚   â€¢ Rows skipped: 1 (header row)                  â”‚
â”‚   â€¢ Warnings: 1                                    â”‚
â”‚   â€¢ Errors: 0                                      â”‚
â”‚                                                     â”‚
â”‚ Warnings:                                           â”‚
â”‚   âš  Row 15: Date format ambiguous (01/02/2024)    â”‚
â”‚      Assumed MM/DD/YYYY format                     â”‚
â”‚      Severity: Low                                 â”‚
â”‚                                                     â”‚
â”‚ File Information:                                   â”‚
â”‚   â€¢ Size: 2.4 MB                                   â”‚
â”‚   â€¢ Hash: sha256:abc123...                         â”‚
â”‚   â€¢ MIME type: application/pdf                     â”‚
â”‚                                                     â”‚
â”‚ Logs:                                               â”‚
â”‚   [View Full ParseLog] (opens /logs/parse/...)     â”‚
â”‚                                                     â”‚
â”‚ Actions:                                            â”‚
â”‚   [View Transactions] [Close]                      â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Content (error case):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parse Details: corrupted.pdf                   [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ Status: âœ— Parsing failed                           â”‚
â”‚                                                     â”‚
â”‚ Error Information:                                  â”‚
â”‚   â€¢ Error Code: PDF_CORRUPT                        â”‚
â”‚   â€¢ Message: Failed to open PDF - Invalid header   â”‚
â”‚   â€¢ Occurred at: 2025-10-23 15:00:01 UTC          â”‚
â”‚                                                     â”‚
â”‚ Parser Information:                                 â”‚
â”‚   â€¢ Parser ID: bofa_pdf_parser                     â”‚
â”‚   â€¢ Version: 1.2.0                                 â”‚
â”‚   â€¢ Duration: 1.2 seconds (failed early)           â”‚
â”‚                                                     â”‚
â”‚ File Information:                                   â”‚
â”‚   â€¢ Size: 1 KB (suspiciously small)                â”‚
â”‚   â€¢ Hash: sha256:def456...                         â”‚
â”‚   â€¢ MIME type: application/pdf                     â”‚
â”‚                                                     â”‚
â”‚ What this means:                                    â”‚
â”‚   The PDF file appears to be corrupted or           â”‚
â”‚   incomplete. This can happen if:                   â”‚
â”‚   â€¢ Download was interrupted                        â”‚
â”‚   â€¢ File was damaged                                â”‚
â”‚   â€¢ Bank's website had an issue                     â”‚
â”‚                                                     â”‚
â”‚ Suggested Actions:                                  â”‚
â”‚   1. Re-download the statement from your bank       â”‚
â”‚   2. Try opening the PDF on your computer          â”‚
â”‚   3. If it opens, the issue may be temporary       â”‚
â”‚                                                     â”‚
â”‚ Technical Details:                                  â”‚
â”‚   [View Full ParseLog] [View Stack Trace]          â”‚
â”‚                                                     â”‚
â”‚ Actions:                                            â”‚
â”‚   [Retry Parsing] [Upload New File] [Close]        â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Notifications

### Push/Email Notifications (Optional, v2)

**Parse completed:**
```
Subject: Statement parsed successfully
Body:
Your statement "statement_jan.pdf" has been processed.
âœ“ 42 transactions extracted
[View Transactions â†’]
```

**Parse failed:**
```
Subject: Statement parsing failed
Body:
Your statement "corrupted.pdf" could not be processed.
Error: PDF file is corrupted or unreadable
[View Details â†’] [Upload New File â†’]
```

---

## Loading States

### Inline Status (within upload card)

**queued_for_parse:**
```
Status: â³ Processing
Subtext: Waiting for parser...
```

**parsing:**
```
Status: ğŸ”„ Parsing... (animated spinner)
Subtext: Extracting transactions... (updates every 5s)
Progress bar: Indeterminate (pulsing)
```

**parsed:**
```
Status: âœ“ Parsed
Subtext: 42 transactions extracted
```

**error:**
```
Status: âœ— Failed
Subtext: PDF_CORRUPT
Link: View details â†’
```

---

## Empty States

### No Uploads Yet

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â”‚              ğŸ“„                             â”‚
â”‚                                             â”‚
â”‚      No uploads yet                         â”‚
â”‚                                             â”‚
â”‚  Upload a bank statement to get started     â”‚
â”‚                                             â”‚
â”‚         [Upload Statement]                  â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### All Uploads Parsed

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Your Uploads                   [Upload New +]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  âœ“ All uploads processed successfully       â”‚
â”‚                                             â”‚
â”‚  3 statements parsed                        â”‚
â”‚  127 total transactions                     â”‚
â”‚                                             â”‚
â”‚  [View All Transactions]                    â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error States

### Parser Timeout (rare)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ— Upload: large_statement.pdf               â”‚
â”‚                                             â”‚
â”‚ Status: Parsing timed out                   â”‚
â”‚ Error: Parser exceeded 30 second limit      â”‚
â”‚                                             â”‚
â”‚ This can happen with very large files.      â”‚
â”‚                                             â”‚
â”‚ [Retry] [Contact Support]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Parser Version Mismatch

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ— Upload: statement_2024.pdf                â”‚
â”‚                                             â”‚
â”‚ Status: Format not recognized               â”‚
â”‚ Error: LAYOUT_MISMATCH                      â”‚
â”‚                                             â”‚
â”‚ The statement format has changed.           â”‚
â”‚ We've been notified and will update the     â”‚
â”‚ parser soon.                                â”‚
â”‚                                             â”‚
â”‚ [Report Issue] [Try Different File]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Accessibility

### Screen Reader Announcements

**When parsing starts:**
```
"Parsing statement_jan.pdf. Please wait."
```

**When parsing completes:**
```
"Parsing complete. 42 transactions extracted from statement_jan.pdf."
```

**When parsing fails:**
```
"Parsing failed. Error: PDF file is corrupted. View details for more information."
```

### Keyboard Navigation

- **Tab order:** Status â†’ Actions (View/Retry/Delete) â†’ Next upload
- **Enter on upload card:** Opens details modal
- **Escape in modal:** Closes modal
- **Space on [Retry]:** Triggers retry

---

## Performance Considerations

### Polling vs WebSocket

**Decision:** Use **polling** for v1 (simpler)

**Implementation:**
```typescript
// Poll every 2 seconds while status = "parsing"
useEffect(() => {
  if (upload.status === 'parsing') {
    const interval = setInterval(() => {
      fetchUploadStatus(upload.upload_id)
    }, 2000)

    return () => clearInterval(interval)
  }
}, [upload.status])
```

**Future (v2):** WebSocket for real-time updates

---

## Decision Points

### When to Show Progress Bar?

**Decision:** Show indeterminate progress bar (pulsing) during parsing

**Rationale:**
- Don't know exactly how long parsing will take
- Indeterminate conveys "working, please wait"
- Determinate would require parser progress events (v2 feature)

---

### How Long to Keep Failed Uploads?

**Decision:** Keep forever (until user deletes)

**Rationale:**
- User may want to retry later
- Error details useful for debugging
- ParseLog remains accessible

---

### Show Parse Duration to User?

**Decision:** Yes, in details modal only

**Rationale:**
- Advanced users appreciate transparency
- Helps identify slow parsers
- Not cluttering main UI

---

## Related Components (IL)

New components identified:

- `<UploadStatusBadge>` - Status indicator with icon/color
- `<ParseDetailsModal>` - Detailed parse information
- `<ParseErrorCard>` - Error display with suggestions
- `<ParseProgressIndicator>` - Spinner/progress during parsing
- `<RetryButton>` - Manual retry trigger

---

**Last Updated**: 2025-10-23
**Status**: Complete
**Related**: Vertical 1.2 (Extraction)
