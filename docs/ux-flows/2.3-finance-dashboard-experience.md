# UX Flow 2.3: Finance Dashboard Experience

> **Vertical:** 2.3 Finance Dashboard (saved views, metrics, exports)
> **Dependencies:** 2.1 Transaction List View (provides drill-down target), 2.2 OL Exploration (provides transaction detail)
> **User Story:** As a user, I want to see pre-configured dashboards with key financial metrics, create custom views, and export snapshots for my accountant.

---

## User Journeys

### Journey 1: Monthly Financial Review

**Context:** User logs in on May 23rd and wants to review their monthly spending patterns. This is a recurring task they perform at the end of each month.

**Steps:**

1. **Entry point:** User logs in to app
   - Dashboard page loads automatically (default view)
   - URL: `/dashboard?view=monthly_overview`
   - Loading skeleton shows while metrics calculate (~500ms)

2. **Dashboard loads with "Monthly Overview" view:**
   - User sees current month (May 2025) metrics:
     ```
     May 2025 Financial Overview

     ┌─────────────────┬─────────────────┬─────────────────┐
     │ Income          │ Expenses        │ Net             │
     │ $9,000.00       │ $8,247.00       │ +$753.00        │
     │ ↑ 5% from April │ ↓ 3% from April │ ↑ 12% from Apr  │
     └─────────────────┴─────────────────┴─────────────────┘

     Top Spending Categories
     ┌─────────────────────────────────────────────────┐
     │ 🍔 Food & Drink         $680.00    (8%)         │
     │ ✈️  Travel              $4,516.00  (55%)        │
     │ 💻 Software & Services  $2,500.00  (30%)        │
     │ 🏥 Health               $551.00    (7%)         │
     └─────────────────────────────────────────────────┘

     Top Merchants
     ┌─────────────────────────────────────────────────┐
     │ Aeromexico        $4,516.00 MXN  (1 transaction)│
     │ Uber Eats         $680.00        (42 orders)    │
     │ OpenAI            $200.00        (1 subscription)│
     │ HubSpot           $5,000.00      (1 payment)    │
     │ GNC               $42.56         (3 purchases)  │
     └─────────────────────────────────────────────────┘

     Deductible Expenses
     ┌─────────────────────────────────────────────────┐
     │ Total Deductible (USA):  $3,450.00  (38%)       │
     │ Business > Software:      $2,500.00             │
     │ Business > Meals (50%):   $950.00               │
     └─────────────────────────────────────────────────┘
     ```

3. **User observation:**
   - User notices: "Travel is 55% of spending this month - that Aeromexico flight"
   - User remembers: "Oh right, the CDMX client meeting"
   - User notes: "Uber Eats $680 across 42 orders - averaging $16 per meal"

4. **User drills down into Food category:**
   - User clicks "Food & Drink" metric card
   - System navigates to Transaction List View (vertical 2.1)
   - URL: `/transactions?category=Food&month=2025-05`
   - User sees all 42 Uber Eats transactions
   - User reviews: "Yeah, ordering lunch every workday. Need to cook more."

5. **User returns to dashboard:**
   - User clicks browser back button (or "Back to Dashboard" link)
   - Dashboard reloads instantly (cached from 5 min ago)

**Outcome:** User completed monthly review, identified spending pattern (high food delivery costs), and gained actionable insight.

**Duration:** ~2 minutes

---

### Journey 2: Create Custom View for Tax Prep

**Context:** User needs to prepare Q1 2025 tax documents for their CPA. They want to create a saved view for all business deductible expenses from January through March.

**Steps:**

1. **Entry point:** User on dashboard, clicks "New View" button
   - Modal/drawer opens: "Create Custom Dashboard View"

2. **Configuration modal:**
   ```
   ┌─────────────────────────────────────────────┐
   │ Create Custom Dashboard View                │
   ├─────────────────────────────────────────────┤
   │ View Name                                   │
   │ [Q1 2025 Deductibles_____________]          │
   │                                             │
   │ Description (optional)                      │
   │ [All business deductibles for tax filing__] │
   │                                             │
   │ Date Range                                  │
   │ ⦿ Custom Range                              │
   │ From: [2025-01-01]  To: [2025-03-31]        │
   │ ○ Current Month                             │
   │ ○ Current Quarter                           │
   │ ○ Current Year                              │
   │                                             │
   │ Filters                                     │
   │ ☑ Deductible (USA) only                     │
   │ ☐ Deductible (Mexico) only                  │
   │ Categories: [All Business Categories ▼]     │
   │                                             │
   │ Widgets to Display                          │
   │ ☑ Deductible Summary                        │
   │ ☑ Category Breakdown                        │
   │ ☑ Top Merchants                             │
   │ ☐ Income Summary (not relevant)             │
   │                                             │
   │ [Cancel]              [Create View]         │
   └─────────────────────────────────────────────┘
   ```

3. **User fills form:**
   - Name: "Q1 2025 Deductibles"
   - Description: "All business deductibles for tax filing"
   - Date range: 2025-01-01 to 2025-03-31
   - Checks: "Deductible (USA) only"
   - Widgets: Deductible Summary, Category Breakdown, Top Merchants

4. **User clicks "Create View":**
   - Modal closes
   - Dashboard recalculates with new filters (~1s)
   - URL updates: `/dashboard?view=q1_2025_deductibles`
   - View is saved to user's account

5. **Dashboard shows Q1 data:**
   ```
   Q1 2025 Deductibles
   Jan 1 - Mar 31, 2025

   ┌─────────────────────────────────────────────┐
   │ Deductible Summary                          │
   │ Total Deductible (USA):  $12,340.00         │
   │ Transactions: 87                            │
   │ Missing Facturas (Mexico): 3                │
   └─────────────────────────────────────────────┘

   Category Breakdown
   ┌─────────────────────────────────────────────┐
   │ Business > Software        $2,500.00  (20%) │
   │ Business > Travel          $4,800.00  (39%) │
   │ Business > Meals (50%)     $2,040.00  (17%) │
   │ Business > Equipment       $1,500.00  (12%) │
   │ Business > Office          $1,500.00  (12%) │
   └─────────────────────────────────────────────┘

   Top Merchants (by deductible amount)
   ┌─────────────────────────────────────────────┐
   │ Aeromexico        $4,516.00  (travel)       │
   │ HubSpot           $2,500.00  (software)     │
   │ Apple             $1,200.00  (equipment)    │
   │ WeWork            $1,500.00  (office)       │
   │ Uber Eats         $950.00   (meals 50%)     │
   └─────────────────────────────────────────────┘
   ```

6. **User verification:**
   - User clicks "Business > Meals (50%)" to verify
   - Drills down to transaction list
   - Reviews meals: "Yes, all client lunches and dinners"
   - User returns to dashboard

7. **User sees "Missing Facturas (Mexico): 3" warning:**
   - User clicks warning badge
   - System shows 3 transactions with missing factura metadata
   - User notes: "Need to upload facturas for these before filing"

**Outcome:** User created reusable view for tax prep, verified data accuracy, and identified missing documentation.

**Duration:** ~5 minutes

---

### Journey 3: Export PDF for Accountant

**Context:** User has reviewed their Q1 2025 deductibles and wants to send a PDF report to their CPA.

**Steps:**

1. **Entry point:** User on "Q1 2025 Deductibles" view (from Journey 2)

2. **User clicks "Export PDF" button:**
   - Export configuration popover appears:
     ```
     ┌────────────────────────────────────┐
     │ Export Dashboard                   │
     ├────────────────────────────────────┤
     │ Format: ⦿ PDF  ○ CSV  ○ Excel      │
     │                                    │
     │ Include:                           │
     │ ☑ Summary metrics                  │
     │ ☑ All charts/widgets               │
     │ ☑ Transaction table (87 rows)      │
     │ ☑ View configuration metadata      │
     │ ☑ Signature line for CPA           │
     │                                    │
     │ [Cancel]        [Generate Export]  │
     └────────────────────────────────────┘
     ```

3. **User selects options:**
   - Format: PDF (default)
   - Checks all boxes (wants complete report)
   - Clicks "Generate Export"

4. **Export processing:**
   - Button changes to "Generating PDF..." with spinner
   - Progress indicator: "Preparing data... 30%"
   - Progress indicator: "Rendering PDF... 70%"
   - Progress indicator: "Finalizing... 100%"
   - Total time: ~3 seconds

5. **PDF download:**
   - Browser downloads: `Q1-2025-Deductibles.pdf`
   - Success toast: "✅ Dashboard exported successfully"

6. **User opens PDF to verify:**
   - PDF contains:
     ```
     ┌─────────────────────────────────────────────┐
     │ Q1 2025 Deductibles                         │
     │ All business deductibles for tax filing     │
     │ Date Range: January 1 - March 31, 2025      │
     │ Generated: May 23, 2025 at 2:30 PM          │
     │ Exported by: eugenio@example.com            │
     ├─────────────────────────────────────────────┤
     │ Summary                                     │
     │ Total Deductible (USA): $12,340.00          │
     │ Transactions: 87                            │
     │ Missing Facturas: 3                         │
     ├─────────────────────────────────────────────┤
     │ Category Breakdown                          │
     │ Business > Software      $2,500.00  (20%)   │
     │ Business > Travel        $4,800.00  (39%)   │
     │ ...                                         │
     ├─────────────────────────────────────────────┤
     │ Transaction Details (87 rows)               │
     │ Date       Merchant      Amount   Category  │
     │ 2025-01-05 HubSpot      $2,500   Software   │
     │ ...                                         │
     ├─────────────────────────────────────────────┤
     │ View Configuration                          │
     │ Filters: Deductible (USA) only              │
     │ Date Range: 2025-01-01 to 2025-03-31        │
     ├─────────────────────────────────────────────┤
     │ Signature                                   │
     │ CPA Signature: ___________________          │
     │ Date: ___________________                   │
     └─────────────────────────────────────────────┘
     ```
   - PDF includes all metrics, transaction table, and configuration metadata
   - User notes: "Perfect. Shows exactly what I need for tax filing."

7. **User sends to accountant:**
   - User emails PDF: "Attached Q1 2025 business deductibles. All categorized and ready for Schedule C."

**Outcome:** User generated professional PDF report with complete data for accountant, including configuration metadata for reproducibility.

**Duration:** ~2 minutes

---

### Journey 4: Quarterly Business Review

**Context:** User is a freelance consultant who wants to review Q1 2025 business performance at a high level.

**Steps:**

1. **Entry point:** User selects saved view from dropdown
   - User clicks "Saved Views" dropdown in dashboard header
   - Dropdown shows:
     ```
     System Views:
       • Monthly Overview
       • Quarterly Summary ✓ (selected)
       • Annual Review

     My Views:
       • Q1 2025 Deductibles
       • Feb Travel Expenses
     ```
   - User selects "Quarterly Summary"

2. **Dashboard recalculates for current quarter:**
   - Date range auto-adjusts: Q1 2025 (Jan 1 - Mar 31)
   - Metrics calculate (~800ms)
   - Dashboard shows:
     ```
     Q1 2025 Business Summary
     January 1 - March 31, 2025

     ┌─────────────────────────────────────────────┐
     │ Revenue vs Expenses                         │
     │ Revenue:       $27,000.00                   │
     │ Expenses:      $24,741.00                   │
     │ Net Profit:    $2,259.00    (8% margin)     │
     │ ↑ 15% from Q4 2024                          │
     └─────────────────────────────────────────────┘

     Expense Breakdown
     ┌─────────────────────────────────────────────┐
     │ 💻 Software (42%)       $10,391.16          │
     │ ✈️  Travel (28%)        $6,927.48           │
     │ 🍽️  Meals (18%)         $4,453.44           │
     │ 🏢 Office (12%)         $2,968.92           │
     └─────────────────────────────────────────────┘

     Month-over-Month Trend
     ┌─────────────────────────────────────────────┐
     │ January:   Revenue $9,000  Exp $8,247  Net $753   │
     │ February:  Revenue $9,000  Exp $8,180  Net $820   │
     │ March:     Revenue $9,000  Exp $8,314  Net $686   │
     │                                             │
     │ Observation: March net dipped due to travel │
     └─────────────────────────────────────────────┘

     Deductible Summary
     ┌─────────────────────────────────────────────┐
     │ Total Deductible (USA):   $12,340.00 (50%)  │
     │ Total Deductible (Mexico): $8,200.00 (33%)  │
     │ Non-Deductible:            $4,201.00 (17%)  │
     └─────────────────────────────────────────────┘
     ```

3. **User analysis:**
   - User observes: "8% profit margin - pretty lean"
   - User notes: "March net profit dipped to $686 from $820 in Feb"
   - User wonders: "What caused March dip?"

4. **User drills into March expenses:**
   - User clicks "March" in month-over-month widget
   - System filters to March 2025
   - User sees: Travel expenses spiked ($4,516 Aeromexico flight)
   - User confirms: "Right, the CDMX client trip. Worth it - landed $12k project."

5. **User compares to Q4 2024:**
   - User clicks "↑ 15% from Q4 2024" link
   - System shows side-by-side comparison:
     ```
     ┌─────────────────┬─────────────────┐
     │ Q4 2024         │ Q1 2025         │
     ├─────────────────┼─────────────────┤
     │ Revenue:        │ Revenue:        │
     │ $23,400         │ $27,000         │
     │ Expenses:       │ Expenses:       │
     │ $21,879         │ $24,741         │
     │ Net:            │ Net:            │
     │ $1,521          │ $2,259          │
     │ Margin: 6.5%    │ Margin: 8.4%    │
     └─────────────────┴─────────────────┘

     Growth: +15% revenue, +13% expenses, +49% net profit
     ```
   - User notes: "Good growth. Expenses under control. On track."

6. **User exports quarterly report:**
   - User clicks "Export PDF"
   - Generates: `Q1-2025-Business-Summary.pdf`
   - User saves for records

**Outcome:** User completed quarterly business review, identified March travel spike (justified by new client), and confirmed healthy growth trajectory.

**Duration:** ~8 minutes

---

## Wireframes

### Desktop: Dashboard Default View (Monthly Overview)

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                [Saved Views: Monthly Overview ▼]    👤   │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│ May 2025 Financial Overview                      [New View] [Export]  │
│                                                                        │
│ ┌─────────────────┬─────────────────┬─────────────────┐              │
│ │ Income          │ Expenses        │ Net             │              │
│ │ $9,000.00       │ $8,247.00       │ +$753.00        │              │
│ │ ↑ 5% from April │ ↓ 3% from April │ ↑ 12% from Apr  │              │
│ └─────────────────┴─────────────────┴─────────────────┘              │
│                                                                        │
│ ┌────────────────────────────────┬────────────────────────────────┐   │
│ │ Top Spending Categories        │ Top Merchants                  │   │
│ ├────────────────────────────────┼────────────────────────────────┤   │
│ │ 🍔 Food & Drink     $680.00    │ Aeromexico    $4,516.00 MXN    │   │
│ │    (8%)            [View →]    │                (1 transaction) │   │
│ │                                │                                │   │
│ │ ✈️  Travel          $4,516.00  │ Uber Eats     $680.00          │   │
│ │    (55%)           [View →]    │                (42 orders)     │   │
│ │                                │                                │   │
│ │ 💻 Software         $2,500.00  │ OpenAI        $200.00          │   │
│ │    (30%)           [View →]    │                (1 subscription)│   │
│ │                                │                                │   │
│ │ 🏥 Health           $551.00    │ HubSpot       $5,000.00        │   │
│ │    (7%)            [View →]    │                (1 payment)     │   │
│ └────────────────────────────────┴────────────────────────────────┘   │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ Deductible Expenses (USA)                                        │  │
│ ├──────────────────────────────────────────────────────────────────┤  │
│ │ Total Deductible:  $3,450.00  (38% of total expenses)            │  │
│ │                                                                  │  │
│ │ Business > Software        $2,500.00                             │  │
│ │ Business > Meals (50%)       $950.00                             │  │
│ │                                                                  │  │
│ │ [View All Deductibles →]                                         │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Mobile: Dashboard (Stacked Widgets)

```
┌──────────────────────────┐
│ ☰  May 2025      👤  ⋮   │
├──────────────────────────┤
│ [Monthly Overview ▼]     │
├──────────────────────────┤
│ Income                   │
│ $9,000.00                │
│ ↑ 5% from April          │
├──────────────────────────┤
│ Expenses                 │
│ $8,247.00                │
│ ↓ 3% from April          │
├──────────────────────────┤
│ Net                      │
│ +$753.00                 │
│ ↑ 12% from April         │
├──────────────────────────┤
│ Top Categories           │
│                          │
│ 🍔 Food         $680     │
│ ✈️  Travel      $4,516   │
│ 💻 Software     $2,500   │
│ 🏥 Health       $551     │
│                          │
│ [View All →]             │
├──────────────────────────┤
│ Top Merchants            │
│                          │
│ Aeromexico     $4,516    │
│ Uber Eats      $680      │
│ OpenAI         $200      │
│ HubSpot        $5,000    │
│                          │
│ [View All →]             │
├──────────────────────────┤
│ Deductible (USA)         │
│ $3,450.00  (38%)         │
│                          │
│ [View Breakdown →]       │
├──────────────────────────┤
│ [New View]  [Export]     │
└──────────────────────────┘
```

---

### Desktop: Create Custom View Modal

```
┌────────────────────────────────────────────────────────────────────────┐
│                                                                        │
│                 ┌────────────────────────────────────┐                 │
│                 │ Create Custom Dashboard View       │                 │
│                 ├────────────────────────────────────┤                 │
│                 │ View Name                          │                 │
│                 │ [Q1 2025 Deductibles____________]  │                 │
│                 │                                    │                 │
│                 │ Description (optional)             │                 │
│                 │ [All business deductibles for___]  │                 │
│                 │ [tax filing____________________]   │                 │
│                 │                                    │                 │
│                 │ Date Range                         │                 │
│                 │ ⦿ Custom Range                     │                 │
│                 │   From: [2025-01-01▼]              │                 │
│                 │   To:   [2025-03-31▼]              │                 │
│                 │ ○ Current Month                    │                 │
│                 │ ○ Current Quarter                  │                 │
│                 │ ○ Current Year                     │                 │
│                 │ ○ Last 30 Days                     │                 │
│                 │                                    │                 │
│                 │ Filters                            │                 │
│                 │ ☑ Deductible (USA) only            │                 │
│                 │ ☐ Deductible (Mexico) only         │                 │
│                 │ Categories: [All Business ▼]       │                 │
│                 │ Accounts:   [All Accounts ▼]       │                 │
│                 │                                    │                 │
│                 │ Widgets to Display                 │                 │
│                 │ ☑ Income Summary                   │                 │
│                 │ ☑ Expense Summary                  │                 │
│                 │ ☑ Net Summary                      │                 │
│                 │ ☑ Category Breakdown               │                 │
│                 │ ☑ Top Merchants                    │                 │
│                 │ ☑ Deductible Summary               │                 │
│                 │                                    │                 │
│                 │ [Cancel]       [Create View]       │                 │
│                 └────────────────────────────────────┘                 │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Desktop: Export Configuration Popover

```
┌────────────────────────────────────────────────────────────────────────┐
│ Q1 2025 Deductibles              [New View] [Export PDF ▼] ←          │
│                                            ↓                           │
│                                   ┌──────────────────────────┐         │
│                                   │ Export Dashboard         │         │
│                                   ├──────────────────────────┤         │
│                                   │ Format:                  │         │
│ ┌───────────────────────────────┐ │ ⦿ PDF  ○ CSV  ○ Excel    │         │
│ │ Deductible Summary            │ │                          │         │
│ ├───────────────────────────────┤ │ Include:                 │         │
│ │ Total: $12,340.00             │ │ ☑ Summary metrics        │         │
│ │ Transactions: 87              │ │ ☑ Charts/widgets         │         │
│ │ Missing Facturas: 3           │ │ ☑ Transaction table      │         │
│ └───────────────────────────────┘ │   (87 rows)              │         │
│                                   │ ☑ View configuration     │         │
│                                   │ ☑ Signature line for CPA │         │
│                                   │                          │         │
│                                   │ [Cancel] [Generate]      │         │
│                                   └──────────────────────────┘         │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Mobile: Export Configuration Full Screen

```
┌──────────────────────────┐
│ ←  Export Dashboard      │
├──────────────────────────┤
│ Format                   │
│ ⦿ PDF                    │
│ ○ CSV                    │
│ ○ Excel                  │
│                          │
│ Include                  │
│ ☑ Summary metrics        │
│ ☑ Charts/widgets         │
│ ☑ Transaction table      │
│   (87 rows)              │
│ ☑ View configuration     │
│ ☑ Signature line         │
│                          │
│                          │
│                          │
│ [Generate Export]        │
│                          │
│ [Cancel]                 │
└──────────────────────────┘
```

---

### Desktop: Saved Views Dropdown

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App    [Saved Views: Monthly Overview ▼] ← (Clicked)   👤   │
│                         ↓                                              │
│                  ┌────────────────────────────────┐                    │
│                  │ System Views                   │                    │
│                  │ • Monthly Overview ✓           │                    │
│                  │ • Quarterly Summary            │                    │
│                  │ • Annual Review                │                    │
│                  │ ────────────────────           │                    │
│                  │ My Views                       │                    │
│                  │ • Q1 2025 Deductibles          │                    │
│                  │ • Feb Travel Expenses          │                    │
│                  │ • 2024 Annual (archived)       │                    │
│                  │ ────────────────────           │                    │
│                  │ + Create New View              │                    │
│                  │ ⚙ Manage Views                 │                    │
│                  └────────────────────────────────┘                    │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

## UI States

### Loading State (Calculating Metrics)

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                [Saved Views: Monthly Overview ▼]    👤   │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│ May 2025 Financial Overview                                           │
│                                                                        │
│ ┌─────────────────┬─────────────────┬─────────────────┐              │
│ │ ▓▓▓▓▓▓▓▓        │ ▓▓▓▓▓▓▓▓        │ ▓▓▓▓▓▓▓▓        │              │
│ │ ▓▓▓▓▓▓▓▓▓▓▓     │ ▓▓▓▓▓▓▓▓▓▓▓     │ ▓▓▓▓▓▓▓▓▓▓▓     │              │
│ │ ▓▓▓▓▓▓▓▓        │ ▓▓▓▓▓▓▓▓        │ ▓▓▓▓▓▓▓▓        │              │
│ └─────────────────┴─────────────────┴─────────────────┘              │
│                                                                        │
│ ┌────────────────────────────────┬────────────────────────────────┐   │
│ │ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  │ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  │   │
│ │ ▓▓▓▓▓▓▓▓▓▓▓▓                  │ ▓▓▓▓▓▓▓▓▓▓▓▓                  │   │
│ │ ▓▓▓▓▓▓▓▓▓▓▓▓                  │ ▓▓▓▓▓▓▓▓▓▓▓▓                  │   │
│ │                                │                                │   │
│ └────────────────────────────────┴────────────────────────────────┘   │
│                                                                        │
│ Loading metrics...                                                     │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Empty State (No Transactions Match Filters)

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                [Saved Views: Q1 2025 Deductibles ▼] 👤   │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│ Q1 2025 Deductibles                          [Edit View] [Export]     │
│ January 1 - March 31, 2025                                            │
│                                                                        │
│                                                                        │
│                          📊                                            │
│                                                                        │
│                   No Transactions Found                                │
│                                                                        │
│             No transactions match your current filters.                │
│                                                                        │
│                    [Adjust Date Range]                                 │
│                    [Clear Filters]                                     │
│                    [Back to Dashboard]                                 │
│                                                                        │
│                                                                        │
│ Filters applied:                                                       │
│ • Date: 2025-01-01 to 2025-03-31                                      │
│ • Deductible (USA) only                                               │
│ • Categories: All Business                                            │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Error State (Metric Calculation Failed)

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                [Saved Views: Monthly Overview ▼]    👤   │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│ May 2025 Financial Overview                      [New View] [Export]  │
│                                                                        │
│                          ⚠️                                             │
│                                                                        │
│                  Error Loading Dashboard                               │
│                                                                        │
│          Failed to calculate metrics. Please try again.                │
│                                                                        │
│                    [Retry] [Report Issue]                              │
│                                                                        │
│                                                                        │
│ Error details (for support):                                          │
│ • Timestamp: 2025-05-23 14:32:15 UTC                                  │
│ • Error code: METRIC_CALCULATION_TIMEOUT                              │
│ • View ID: view_monthly_overview                                      │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Warning State (Metric Calculation Timeout - Partial Data)

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                [Saved Views: Annual 2024 ▼]         👤   │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│ ⚠️  Large dataset detected. Showing partial metrics.                   │
│    Narrow date range for faster results. [Learn More]                 │
│                                                                        │
│ 2024 Full Year                                  [New View] [Export]   │
│                                                                        │
│ ┌─────────────────┬─────────────────┬─────────────────┐              │
│ │ Income          │ Expenses        │ Net             │              │
│ │ $108,000.00     │ $98,988.00      │ +$9,012.00      │              │
│ │ (complete)      │ (complete)      │ (complete)      │              │
│ └─────────────────┴─────────────────┴─────────────────┘              │
│                                                                        │
│ ┌────────────────────────────────┬────────────────────────────────┐   │
│ │ Top Categories (partial)       │ Top Merchants (partial)        │   │
│ │ ⚠️  Showing top 10 only         │ ⚠️  Showing top 10 only         │   │
│ ├────────────────────────────────┼────────────────────────────────┤   │
│ │ 💻 Software     $30,000        │ HubSpot        $30,000         │   │
│ │ ✈️  Travel      $19,000        │ Aeromexico     $19,000         │   │
│ │ ...                            │ ...                            │   │
│ └────────────────────────────────┴────────────────────────────────┘   │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Success State (View Saved)

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                [Saved Views: Q1 2025 Deductibles ▼]  👤  │
├────────────────────────────────────────────────────────────────────────┤
│ ✅ View "Q1 2025 Deductibles" saved successfully                       │
│                                                                        │
│ Q1 2025 Deductibles                          [Edit View] [Export]     │
│ January 1 - March 31, 2025                                            │
│                                                                        │
│ ┌───────────────────────────────────────────────────────────────────┐ │
│ │ Deductible Summary                                                │ │
│ │ Total Deductible (USA):  $12,340.00                               │ │
│ │ Transactions: 87                                                  │ │
│ └───────────────────────────────────────────────────────────────────┘ │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Export Progress State

```
┌────────────────────────────────────────────────────────────────────────┐
│ Q1 2025 Deductibles              [New View] [⏳ Generating PDF...]     │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ Exporting Dashboard                                              │  │
│ ├──────────────────────────────────────────────────────────────────┤  │
│ │                                                                  │  │
│ │ Preparing data...                                                │  │
│ │ [██████████████████████████████░░░░░░░░░░] 70%                  │  │
│ │                                                                  │  │
│ │ Estimated time remaining: 2 seconds                              │  │
│ │                                                                  │  │
│ │ [Cancel]                                                         │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

## Interaction Details

### Metric Card Click (Drill-Down)

**Trigger:** User clicks metric card (e.g., "Food & Drink $680")

**Behavior:**
1. Card highlights (border: blue, 2px)
2. System navigates to Transaction List View (vertical 2.1)
3. URL: `/transactions?category=Food&month=2025-05`
4. Transaction list loads with pre-filtered results
5. Breadcrumb shows: "Dashboard > Food & Drink (May 2025)"

**Keyboard:** `Enter` on focused card → Same navigation

---

### View Selector Dropdown

**Trigger:** User clicks "Saved Views" dropdown

**Behavior:**
1. Dropdown opens below button (300ms slide down animation)
2. Shows system views (non-deletable) + user views (with edit/delete icons)
3. Current view has checkmark (✓)
4. Hover highlights row (light gray background)
5. Click view → Dashboard recalculates with new view config
6. Click "+ Create New View" → Opens create modal
7. Click "⚙ Manage Views" → Opens view management page

**Keyboard:**
- `↓` / `↑` → Navigate options
- `Enter` → Select view
- `ESC` → Close dropdown

---

### Export Button

**Trigger:** User clicks "Export PDF" button

**Behavior:**
1. Export configuration popover appears (if not yet configured)
2. User selects format (PDF/CSV/Excel) and options
3. User clicks "Generate Export"
4. Button changes to "Generating..." with spinner
5. Progress bar appears (0% → 100%)
6. On success: File downloads + toast: "✅ Dashboard exported"
7. Button returns to "Export PDF"

**Error handling:**
- If export fails: Toast: "❌ Export failed. Try again."
- Button returns to "Export PDF"
- User can retry

---

### Widget Rearrange (Drag & Drop)

**Out of scope for v1** - Defer to v2

**Future:** User can drag widgets to rearrange dashboard grid

---

### Accessibility

**Screen Reader:**
- Announces: "Dashboard loaded. Monthly Overview. Income: $9,000. Expenses: $8,247. Net: $753."
- Announces metric cards: "Food and Drink category. $680. 8% of total. Click to view transactions."
- Announces export: "Export button. Click to download dashboard as PDF."

**Keyboard Navigation:**
- `Tab` → Focus next widget/button
- `Shift+Tab` → Focus previous
- `Enter` / `Space` → Activate button or drill down
- `ESC` → Close modal/dropdown

**High Contrast:**
- Metric cards have borders (not just background color)
- Trend indicators use icons + color:
  - ↑ (green) for increase
  - ↓ (red) for decrease
  - → (gray) for no change

---

## Performance Expectations

| Action | Target | Notes |
|--------|--------|-------|
| Load default dashboard | p95 < 1.5s | Includes API call + metric calculation + render |
| Switch saved views | p95 < 1s | Metrics recalculated, UI re-rendered |
| Create new view | < 500ms | Save to DB, update dropdown |
| Export PDF (metrics only) | p95 < 2s | No transaction table |
| Export PDF (with 1k rows) | p95 < 3s | Includes transaction table |
| Export PDF (with 10k rows) | p95 < 8s | Max allowed size |
| Metric drill-down | < 200ms | Navigate to Transaction List View |

---

## Decision Points

### When to show Empty State vs Error State?

**Empty State:**
- Metric calculation succeeds BUT returns zero results
- Example: No transactions match date range + filters
- User action: Adjust filters or date range

**Error State:**
- Metric calculation fails (timeout, DB error, etc.)
- Example: Query timeout after 5s
- User action: Retry or narrow date range

**Partial Data Warning:**
- Metric calculation times out BUT partial results available
- Example: Top 10 categories calculated, but full list incomplete
- User action: Narrow date range for complete results

---

### When to cache dashboard metrics?

**Cache Strategy:**

```http
# Cache dashboard metrics (invalidate on new transaction normalized)
Cache-Control: private, max-age=300  # 5 minutes

# Cache saved view list (invalidate on view create/delete)
Cache-Control: private, max-age=600  # 10 minutes

# Don't cache export (always fresh data)
Cache-Control: private, no-cache
```

**Invalidation triggers:**
- New transaction normalized → Invalidate all view metrics
- View created/deleted → Invalidate view list
- User logs out → Clear all cache

---

### When to auto-save vs require explicit save?

**Vertical 2.3 decision: Explicit save only**

- User must click "Create View" to save
- Rationale: Prevents accidental view creation
- Future (v2): Auto-save drafts (like Google Docs)

---

**Next vertical:** 3.1 (Account Registry) — Closed registry of user's financial accounts with metadata.
