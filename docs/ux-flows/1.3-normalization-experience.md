# UX Flow: Normalization Experience (Vertical 1.3)

**Version**: 1.0
**Status**: Formalized
**Last Updated**: 2025-10-23
**Related Vertical**: 1.3 (Normalization)

---

## Overview

**What users see during and after normalization:**

While **normalization is automated (no user interaction during processing)**, users need visibility into:
1. **Progress:** "Normalizing transactions..." (status indicator)
2. **Results:** "95/100 transactions normalized" (success summary)
3. **Errors:** "5 transactions failed validation" (with details)
4. **Warnings:** "8 possible duplicates detected" (flags for review)
5. **Actions:** Review failed transactions, confirm/dismiss duplicates, manually categorize

**Key principle:** Normalization happens in background, but user has full observability and control over results.

---

## User Journeys

### Journey 1: Happy Path (All Transactions Normalized)

**Context:** User uploaded bank statement, extraction succeeded, now normalizing.

**Steps:**

1. **Upload complete, parsing complete:**
   - UI shows: "Parsing complete: 42 transactions extracted"
   - Status: "Normalizing..." (spinner icon)

2. **Normalization in progress:**
   - Status updates: "Normalizing transactions..." (progress bar or spinner)
   - Time estimate: "Usually takes a few seconds"
   - (No user action required)

3. **Normalization complete (all succeed):**
   - UI updates: "âœ… 42 transactions ready to review"
   - Status: "Normalized" (green checkmark)
   - Summary: "All transactions validated and categorized"

4. **User reviews transactions:**
   - Transactions list shows: Date, Merchant, Amount, Category
   - Categories: Auto-inferred (e.g., "Starbucks" â†’ "Food & Drink")
   - User can: Edit categories, add notes, confirm transactions

5. **User confirms and proceeds:**
   - Click "Looks good" â†’ proceed to dashboard/analytics
   - All 42 transactions now part of canonical dataset

---

### Journey 2: Partial Success (Some Transactions Fail Validation)

**Context:** User uploaded statement with some invalid data (e.g., corrupted rows).

**Steps:**

1. **Normalization completes with failures:**
   - UI shows: "âš ï¸ 95/100 transactions normalized"
   - Status: "Normalized (with errors)" (yellow warning icon)
   - Summary: "5 transactions failed validation"

2. **User clicks "View errors":**
   - Drawer opens showing failed transactions
   - For each failure:
     - Row number: "Row 42"
     - Raw data: `date="invalid_date", amount="-5.75", description="STARBUCKS"`
     - Error: "Unparseable date format"
     - Action: [Edit manually] [Skip]

3. **User chooses action:**
   - **Option A: Edit manually**
     - Modal opens with form: Date (datepicker), Amount (input), Description (input)
     - User corrects date: "2025-01-15"
     - Click "Save" â†’ transaction re-normalized â†’ added to canonicals
   - **Option B: Skip**
     - Transaction remains in failed state
     - Can revisit later in "Failed transactions" tab

4. **User proceeds with 95 valid transactions:**
   - Click "Continue with 95 transactions" â†’ dashboard/analytics
   - Failed transactions logged for later review

---

### Journey 3: Duplicate Detection (Flags for Review)

**Context:** User uploads multiple statements with overlapping dates â†’ duplicates detected.

**Steps:**

1. **Normalization completes with warnings:**
   - UI shows: "âœ… 100 transactions normalized"
   - Status: "Normalized (8 duplicates detected)" (blue info icon)
   - Summary: "8 possible duplicates flagged for review"

2. **User clicks "Review duplicates":**
   - Drawer opens showing flagged transactions
   - For each duplicate:
     - Transaction A: "01/15/2025 | Starbucks | -$5.75 | Debit Card"
     - Transaction B: "01/15/2025 | Starbucks | -$5.75 | Credit Card"
     - Similarity: "Same date, amount, merchant (Â±1 day)"
     - Action: [Keep both] [Keep A, delete B] [Keep B, delete A]

3. **User resolves duplicates:**
   - **Option A: Keep both** (they're actually different transactions)
     - Click "Keep both" â†’ both marked as unique â†’ no longer flagged
   - **Option B: Delete duplicate**
     - Click "Keep A, delete B" â†’ Transaction B deleted â†’ only A remains

4. **User confirms and proceeds:**
   - All duplicates resolved
   - UI shows: "100 unique transactions" â†’ dashboard/analytics

---

### Journey 4: Uncategorized Transactions (Manual Review)

**Context:** Normalization succeeds but many transactions uncategorized (unknown merchants).

**Steps:**

1. **Normalization completes with low category coverage:**
   - UI shows: "âœ… 100 transactions normalized"
   - Status: "Normalized (25 uncategorized)" (yellow warning icon)
   - Summary: "25 transactions need manual categorization"

2. **User clicks "Categorize transactions":**
   - Drawer opens showing uncategorized transactions
   - For each transaction:
     - Transaction: "01/15/2025 | XYZ CORP 123456 | -$127.50"
     - Category: "Uncategorized" (dropdown)
     - Action: [Select category]

3. **User categorizes transactions:**
   - Click dropdown â†’ select "Business Expenses"
   - System learns: "XYZ CORP 123456" â†’ "Business Expenses" (future transactions auto-categorized)
   - Repeat for all 25 transactions (or bulk select)

4. **User confirms and proceeds:**
   - All transactions categorized â†’ dashboard shows breakdown by category

---

### Journey 5: Large Amount Warnings (Fraud Prevention)

**Context:** Normalization detects unusually large transaction (>$10k threshold).

**Steps:**

1. **Normalization completes with warnings:**
   - UI shows: "âœ… 100 transactions normalized"
   - Status: "Normalized (1 large amount detected)" (blue info icon)
   - Alert: "âš ï¸ Large transaction detected: $15,750.00 on 01/20/2025"

2. **User clicks "Review large transaction":**
   - Modal opens showing transaction details:
     - Date: "01/20/2025"
     - Merchant: "ABC Real Estate"
     - Amount: "$15,750.00"
     - Category: "Housing"
     - Warning: "Amount exceeds $10,000 threshold"
     - Question: "Is this transaction correct?"

3. **User verifies transaction:**
   - **Option A: Confirm** (it's correct)
     - Click "Yes, this is correct" â†’ warning dismissed
   - **Option B: Report error** (it's wrong)
     - Click "No, report error" â†’ transaction flagged for manual review
     - Support team investigates (possible parser error)

4. **User proceeds:**
   - Warning resolved â†’ dashboard/analytics

---

## UI States

### State 1: Normalizing (In Progress)

**Status badge:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: Normalizing...         â”‚
â”‚ â³ Processing 100 transactions â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Upload card:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ Upload: statement_jan.pdf                â”‚
â”‚                                             â”‚
â”‚ Status: Normalizing â³                      â”‚
â”‚ Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 80%                  â”‚
â”‚                                             â”‚
â”‚ [View raw data]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**User actions:** None (wait for completion)

---

### State 2: Normalized (All Success)

**Status badge:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: Normalized âœ…          â”‚
â”‚ 42 transactions ready          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Upload card:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Upload: statement_jan.pdf                 â”‚
â”‚                                             â”‚
â”‚ Status: Normalized                          â”‚
â”‚ Transactions: 42/42 validated               â”‚
â”‚                                             â”‚
â”‚ [View transactions] [Download]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**User actions:** View transactions, proceed to dashboard

---

### State 3: Normalized (With Errors)

**Status badge:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: Normalized âš ï¸          â”‚
â”‚ 95/100 transactions validated  â”‚
â”‚ 5 failed validation            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Upload card:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ Upload: statement_jan.pdf                 â”‚
â”‚                                             â”‚
â”‚ Status: Normalized (with errors)            â”‚
â”‚ Transactions: 95/100 validated              â”‚
â”‚ Errors: 5 transactions failed               â”‚
â”‚                                             â”‚
â”‚ [View errors] [View valid transactions]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**User actions:** View errors, edit manually or skip

---

### State 4: Normalized (With Warnings)

**Status badge:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: Normalized â„¹ï¸          â”‚
â”‚ 100 transactions validated     â”‚
â”‚ 8 duplicates detected          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Upload card:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â„¹ï¸ Upload: statement_jan.pdf                 â”‚
â”‚                                             â”‚
â”‚ Status: Normalized (review needed)          â”‚
â”‚ Transactions: 100/100 validated             â”‚
â”‚ Duplicates: 8 possible duplicates           â”‚
â”‚ Uncategorized: 15 transactions              â”‚
â”‚                                             â”‚
â”‚ [Review duplicates] [Categorize] [Continue] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**User actions:** Review duplicates, categorize, or proceed

---

## Wireframes

### Desktop: Normalized Transactions List

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Finance App                            [Profile] [Settings] [?]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸ“Š Transactions (January 2025)                  [Export] [+]    â”‚
â”‚                                                                  â”‚
â”‚  Filters: [All Categories â–¼] [All Accounts â–¼] [Date Range â–¼]    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Date       Merchant        Amount    Category     Account   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 01/15/2025 Starbucks       -$5.75   Food & Drink  Debit    â”‚  â”‚
â”‚  â”‚ 01/15/2025 Shell Gas       -$45.00  Transport     Debit    â”‚  â”‚
â”‚  â”‚ 01/16/2025 Amazon          -$127.49 Shopping      Credit   â”‚  â”‚
â”‚  â”‚ 01/17/2025 Salary          +$2500   Income        Checking â”‚  â”‚
â”‚  â”‚ 01/18/2025 Rent Payment    -$1500   Housing       Checking â”‚  â”‚
â”‚  â”‚ 01/20/2025 âš ï¸ XYZ CORP      -$127.50 Uncategorized Debit    â”‚  â”‚
â”‚  â”‚            [Categorize]                                     â”‚  â”‚
â”‚  â”‚ 01/22/2025 â„¹ï¸ Starbucks     -$5.75   Food & Drink  Credit   â”‚  â”‚
â”‚  â”‚            Possible duplicate of 01/15/2025                 â”‚  â”‚
â”‚  â”‚            [Keep both] [Delete this]                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  Showing 42 transactions | Total spent: -$3,127.49              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Desktop: Error Details Drawer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Finance App                                   [Ã—] Close           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  âŒ Validation Errors (5 transactions)                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Row 42                                                      â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚ Raw Data:                                                   â”‚  â”‚
â”‚  â”‚   Date: "invalid_date"                                      â”‚  â”‚
â”‚  â”‚   Amount: "-5.75"                                           â”‚  â”‚
â”‚  â”‚   Description: "STARBUCKS #1234"                            â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚ Error: Unparseable date format                              â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚ [Edit manually] [Skip]                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Row 78                                                      â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚ Raw Data:                                                   â”‚  â”‚
â”‚  â”‚   Date: "01/15/2025"                                        â”‚  â”‚
â”‚  â”‚   Amount: "N/A"                                             â”‚  â”‚
â”‚  â”‚   Description: "REFUND"                                     â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚ Error: Amount parse error (non-numeric value)               â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚ [Edit manually] [Skip]                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  [Continue with valid transactions (95)]                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Mobile: Normalized Transaction Card (Warning)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â„¹ï¸ Possible Duplicate             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚ ğŸ“… 01/15/2025                    â”‚
â”‚ ğŸª Starbucks                     â”‚
â”‚ ğŸ’µ -$5.75                        â”‚
â”‚ ğŸ“ Food & Drink                  â”‚
â”‚ ğŸ’³ Credit Card                   â”‚
â”‚                                 â”‚
â”‚ âš ï¸ Similar transaction found:    â”‚
â”‚   01/15/2025 | Starbucks        â”‚
â”‚   -$5.75 | Debit Card           â”‚
â”‚                                 â”‚
â”‚ [Keep both]  [Delete this]      â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Notifications

### Push Notification: Normalization Complete

**Trigger:** Normalization finishes while user is away from app.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Finance App                     â”‚
â”‚                                 â”‚
â”‚ âœ… 42 transactions ready         â”‚
â”‚ Your January statement has been â”‚
â”‚ processed and is ready to       â”‚
â”‚ review.                         â”‚
â”‚                                 â”‚
â”‚ [View now]  [Dismiss]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Push Notification: Normalization Errors

**Trigger:** Normalization completes with failures.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Finance App                     â”‚
â”‚                                 â”‚
â”‚ âš ï¸ Action needed                 â”‚
â”‚ 5 transactions failed           â”‚
â”‚ validation. Review and fix.     â”‚
â”‚                                 â”‚
â”‚ [Review errors]  [Dismiss]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Push Notification: Duplicates Detected

**Trigger:** Normalization detects possible duplicates.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Finance App                     â”‚
â”‚                                 â”‚
â”‚ â„¹ï¸ Duplicates detected           â”‚
â”‚ 8 possible duplicate            â”‚
â”‚ transactions found. Review to   â”‚
â”‚ avoid double-counting.          â”‚
â”‚                                 â”‚
â”‚ [Review]  [Dismiss]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Accessibility

### Screen Reader Announcements

**Normalization in progress:**
- "Normalizing transactions. Please wait."
- ARIA live region updates: "80% complete"

**Normalization complete (success):**
- "Normalization complete. 42 transactions validated and ready to review."

**Normalization complete (with errors):**
- "Normalization complete with errors. 95 out of 100 transactions validated. 5 transactions failed. Click 'View errors' for details."

**Normalization complete (with warnings):**
- "Normalization complete. 100 transactions validated. 8 possible duplicates detected. Click 'Review duplicates' to resolve."

---

### Keyboard Navigation

**Upload card (normalized with errors):**
1. `Tab` â†’ Focus on "View errors" button
2. `Enter` â†’ Open error details drawer
3. `Tab` â†’ Focus on first error's "Edit manually" button
4. `Enter` â†’ Open edit modal
5. `Esc` â†’ Close modal, return to drawer
6. `Esc` â†’ Close drawer, return to upload card

**Duplicate resolution:**
1. `Tab` â†’ Focus on "Keep both" button
2. `Arrow Right` â†’ Focus on "Keep A, delete B" button
3. `Arrow Right` â†’ Focus on "Keep B, delete A" button
4. `Enter` â†’ Execute selected action

---

## Performance

### Perceived Performance

**Instant feedback:**
- Status updates: <100ms after backend state change
- Progress bar: Smooth animation (no jank)
- Drawer open/close: <200ms transition

**Optimistic UI:**
- User action (e.g., "Keep both duplicates") â†’ immediate UI update
- Backend confirmation happens async
- If fails, revert UI and show error

**Batch updates:**
- If resolving 8 duplicates â†’ don't refresh UI 8 times
- Single refresh after all actions processed

---

### Loading States

**Normalization in progress:**
- Show spinner or progress bar (if backend provides progress)
- Disable actions ("View transactions" button grayed out)

**Error drawer loading:**
- Skeleton UI while fetching error details from NormalizationLog
- Fade in content when loaded

---

## Decision Points

### 1. Real-Time Progress vs. Final Result Only?

**Option A: Real-time progress bar**
- Show: "Normalizing 45/100 transactions..."
- Requires: Backend WebSocket or polling

**Option B: Spinner until complete**
- Show: "Normalizing..." (no percentage)
- Simpler: Just poll status (parsed â†’ normalizing â†’ normalized)

**Decision:** Start with Option B (simpler), upgrade to A if users complain.

---

### 2. Auto-Resolve Duplicates vs. Always Ask User?

**Option A: Auto-resolve high-confidence duplicates**
- If similarity >95% â†’ auto-delete duplicate
- Only show low-confidence (<95%) to user

**Option B: Always ask user**
- Show all duplicates, let user decide

**Decision:** Start with Option B (user control), add A as "Auto-resolve duplicates" setting.

---

### 3. Inline Editing vs. Modal?

**Option A: Inline editing** (edit failed transaction directly in list)
- Faster, fewer clicks
- Harder on mobile (small inputs)

**Option B: Modal** (click "Edit manually" â†’ form opens)
- More space, clearer UI
- Extra click

**Decision:** Use Option B (modal) for clarity, especially on mobile.

---

## Edge Cases

**1. All transactions fail normalization:**
- Show: "âŒ All transactions failed validation"
- Action: "View errors and fix manually" (required before proceeding)

**2. Zero warnings (perfect normalization):**
- Show: "âœ… All transactions validated with no issues"
- Action: "View transactions" â†’ proceed

**3. User ignores errors and proceeds:**
- Warning modal: "5 transactions will be excluded. Continue?"
- Confirm â†’ proceed with valid transactions only

**4. User dismisses duplicate warning:**
- Duplicates remain in dataset (both counted)
- Can revisit later in "Flagged transactions" tab

**5. Normalization fails (backend error):**
- Show: "âŒ Normalization failed. Please try again."
- Action: [Retry] (re-run normalizer on same observations)

---

## Summary

**Key UX principles for normalization:**

1. **Visibility:** User always knows what's happening (status updates)
2. **Control:** User can review errors, resolve duplicates, categorize
3. **Flexibility:** Partial success allowed (don't block for bad rows)
4. **Feedback:** Clear error messages, actionable warnings
5. **Accessibility:** Screen reader support, keyboard navigation
6. **Performance:** Instant UI updates, optimistic actions

**Next vertical:** 2.1 (Transaction List View) â€” View, filter, and explore canonical transactions with pagination.
