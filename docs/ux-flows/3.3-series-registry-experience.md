# UX Flow 3.3: Series Registry Experience

> **Vertical:** 3.3 Series Registry (closed registry of recurring payment templates)
> **Dependencies:** 3.1 Account Registry (series references accounts), 3.2 Counterparty Registry (series references counterparties), 2.1 Transaction List (instance linking)
> **User Story:** As a user, I want to track recurring payments (subscriptions, bills, salary) so I can detect missing payments, amount changes, and schedule drift.

---

## User Journeys

### Journey 1: User Creates First Recurring Series (OpenAI Subscription)

**Context:** User has been manually tracking Netflix and Spotify subscriptions. They just signed up for OpenAI ChatGPT Plus ($20/month) and want to ensure they catch any billing issues.

**Steps:**

1. **Entry point:** User navigates to Settings > Series
   - URL: `/settings/series`
   - System shows empty state (no series registered yet)
   - Empty state screen:
     ```
     ┌────────────────────────────────────────────────────┐
     │                        📅                          │
     │                                                    │
     │              Track Recurring Payments              │
     │                                                    │
     │    Create series for subscriptions, bills, and     │
     │    recurring income to get alerts when payments    │
     │    are missed or amounts change.                   │
     │                                                    │
     │              [+ Create First Series]               │
     │                                                    │
     │    Examples: Netflix subscription, rent, salary →  │
     └────────────────────────────────────────────────────┘
     ```

2. **User clicks "Create First Series":**
   - Create Series modal opens
   - Focus automatically on "Series Name" field
   - Modal shows:
     ```
     ┌────────────────────────────────────────────┐
     │ Create Series                          × │
     ├────────────────────────────────────────────┤
     │ Series Name *                              │
     │ [____________________________________]     │
     │                                            │
     │ Account *                                  │
     │ [Select account ▼]                         │
     │                                            │
     │ Counterparty *                             │
     │ [Select counterparty ▼]                    │
     │                                            │
     │ Expected Amount *                          │
     │ [$0.00_______________________________]     │
     │                                            │
     │ Tolerance (± amount)                       │
     │ [$2.00_______________________________]     │
     │ ⓘ Allow variance up to ±$2.00              │
     │                                            │
     │ [Next: Configure Schedule →]               │
     │                                            │
     │ [Cancel]                                   │
     └────────────────────────────────────────────┘
     ```

3. **User fills basic information:**
   - Types: "OpenAI ChatGPT Plus"
   - Selects account: "Chase Credit Card"
   - Selects counterparty: "OpenAI" (from dropdown)
   - Types expected amount: "$20.00"
   - Leaves tolerance: "$2.00" (default)
   - Clicks "Next: Configure Schedule"

4. **Recurrence configuration dialog appears:**
   ```
   ┌────────────────────────────────────────────┐
   │ Configure Recurrence                   × │
   ├────────────────────────────────────────────┤
   │ OpenAI ChatGPT Plus                        │
   │ $20.00 ±$2.00 • Chase Credit Card          │
   ├────────────────────────────────────────────┤
   │                                            │
   │ Frequency *                                │
   │ [⦿ Monthly] [ Weekly] [ Yearly]            │
   │ [ Daily]    [ Custom]                      │
   │                                            │
   │ Day of Month *                             │
   │ [5▼]                                       │
   │                                            │
   │ Start Date *                               │
   │ [2024-01-05▼]                              │
   │                                            │
   │ End Date (optional)                        │
   │ [Never ends___________________________]    │
   │ ○ Never ends  ○ Ends on specific date     │
   │                                            │
   │ Category (optional)                        │
   │ [Software & SaaS▼]                         │
   │                                            │
   │ ─────────────────────────────────          │
   │ Preview Next Occurrences:                  │
   │ • Feb 5, 2024 ($20.00)                     │
   │ • Mar 5, 2024 ($20.00)                     │
   │ • Apr 5, 2024 ($20.00)                     │
   │                                            │
   │ [← Back]                  [Create Series]  │
   └────────────────────────────────────────────┘
   ```

5. **User configures schedule:**
   - Frequency: "Monthly" (already selected)
   - Day of month: "5"
   - Start date: "2024-01-05"
   - End date: "Never ends" (default)
   - Category: "Software & SaaS"
   - User reviews preview: "Feb 5, Mar 5, Apr 5..."

6. **User clicks "Create Series":**
   - Modal closes with fade-out (200ms)
   - Success toast: "✅ Series 'OpenAI ChatGPT Plus' created"
   - Series Manager view loads:
     ```
     ┌────────────────────────────────────────────────────┐
     │ Recurring Series (1)                [+ New Series] │
     ├────────────────────────────────────────────────────┤
     │ Search series... [____________] [Filter ▼]         │
     │                                 ☐ Show archived    │
     ├────────────────────────────────────────────────────┤
     │                                                    │
     │ SOFTWARE & SAAS (1)                                │
     │ ┌──────────────────────────────────────────────┐  │
     │ │ 📅 OpenAI ChatGPT Plus              $20.00   │  │
     │ │ Chase Credit Card • OpenAI                   │  │
     │ │ Monthly on day 5                             │  │
     │ │                                              │  │
     │ │ ✅ Paid on time                              │  │
     │ │ Last: Jan 5, 2024 ($20.00)                   │  │
     │ │ Next: Feb 5, 2024                            │  │
     │ │                                              │  │
     │ │ [View History] [Edit] [Archive]              │  │
     │ └──────────────────────────────────────────────┘  │
     │                                                    │
     └────────────────────────────────────────────────────┘
     ```

7. **User verification:**
   - Series card shows all details
   - Status badge: "✅ Paid on time"
   - Next expected date: "Feb 5, 2024"
   - User thinks: "Perfect! Now I'll get alerts if OpenAI doesn't charge me."

**Outcome:** User successfully created first recurring series. System will now auto-link matching transactions and alert on missing payments.

**Duration:** ~4 minutes

---

### Journey 2: User Views Series Dashboard with Status Badges

**Context:** User has 6 active series. It's November 18, 2024. Netflix payment (expected Nov 15) hasn't arrived yet. Rent increased from $1,200 to $1,250.

**Steps:**

1. **Entry point:** User navigates to Settings > Series
   - System loads all active series
   - Status detection runs for each series

2. **Series Manager displays with status badges:**
   ```
   ┌────────────────────────────────────────────────────┐
   │ Recurring Series (6)                [+ New Series] │
   ├────────────────────────────────────────────────────┤
   │ Search series... [____________] [Filter ▼]         │
   │ [Status: All ▼]  ☐ Show archived                  │
   ├────────────────────────────────────────────────────┤
   │                                                    │
   │ SUBSCRIPTIONS (3)                                  │
   │ ┌──────────────────────────────────────────────┐  │
   │ │ 📅 Netflix                          $15.99   │  │
   │ │ BofA Credit • Netflix                        │  │
   │ │ Monthly on day 15                            │  │
   │ │                                              │  │
   │ │ 🔴 Missing (3 days overdue)                  │  │
   │ │ Expected: Nov 15, 2024 ($15.99)              │  │
   │ │ No transaction found                         │  │
   │ │                                              │  │
   │ │ [Link Transaction] [Mark Skipped] [Edit]     │  │
   │ └──────────────────────────────────────────────┘  │
   │                                                    │
   │ ┌──────────────────────────────────────────────┐  │
   │ │ 📅 Spotify Premium                  $9.99    │  │
   │ │ Chase Credit • Spotify                       │  │
   │ │ Monthly on day 1                             │  │
   │ │                                              │  │
   │ │ ✅ Paid on time                              │  │
   │ │ Last: Nov 1, 2024 ($9.99)                    │  │
   │ │ Next: Dec 1, 2024                            │  │
   │ │                                              │  │
   │ │ [View History] [Edit]                        │  │
   │ └──────────────────────────────────────────────┘  │
   │                                                    │
   │ ┌──────────────────────────────────────────────┐  │
   │ │ 📅 OpenAI ChatGPT Plus              $20.00   │  │
   │ │ Chase Credit • OpenAI                        │  │
   │ │ Monthly on day 5                             │  │
   │ │                                              │  │
   │ │ 📅 Upcoming (13 days)                        │  │
   │ │ Next: Dec 5, 2024 ($20.00)                   │  │
   │ │                                              │  │
   │ │ [View History] [Edit]                        │  │
   │ └──────────────────────────────────────────────┘  │
   │                                                    │
   │ BILLS (2)                                          │
   │ ┌──────────────────────────────────────────────┐  │
   │ │ 📅 Rent - Monthly                  $1,200.00 │  │
   │ │ BofA Checking • Landlord LLC                 │  │
   │ │ Monthly on day 1                             │  │
   │ │                                              │  │
   │ │ ⚠️  Amount variance (+$50.00)                │  │
   │ │ Expected: $1,200.00                          │  │
   │ │ Actual: $1,250.00 (Nov 1, 2024)              │  │
   │ │                                              │  │
   │ │ [Update Expected] [View History] [Edit]      │  │
   │ └──────────────────────────────────────────────┘  │
   │                                                    │
   │ ┌──────────────────────────────────────────────┐  │
   │ │ 📅 Electric Bill                   $120.00   │  │
   │ │ BofA Checking • PG&E                         │  │
   │ │ Monthly on day 20                            │  │
   │ │                                              │  │
   │ │ 📅 Upcoming (2 days)                         │  │
   │ │ Next: Nov 20, 2024 ($120.00)                 │  │
   │ │                                              │  │
   │ │ [View History] [Edit]                        │  │
   │ └──────────────────────────────────────────────┘  │
   │                                                    │
   │ INCOME (1)                                         │
   │ ┌──────────────────────────────────────────────┐  │
   │ │ 📅 Salary (Direct Deposit)       $4,500.00   │  │
   │ │ BofA Checking • Acme Corp                    │  │
   │ │ Monthly on last Friday                       │  │
   │ │                                              │  │
   │ │ ✅ Paid on time                              │  │
   │ │ Last: Nov 8, 2024 ($4,500.00)                │  │
   │ │ Next: Dec 6, 2024                            │  │
   │ │                                              │  │
   │ │ [View History] [Edit]                        │  │
   │ └──────────────────────────────────────────────┘  │
   │                                                    │
   └────────────────────────────────────────────────────┘
   ```

3. **User observes status badges:**
   - Netflix: "🔴 Missing (3 days overdue)" — RED alert
   - Spotify: "✅ Paid on time" — GREEN success
   - OpenAI: "📅 Upcoming (13 days)" — BLUE informational
   - Rent: "⚠️ Amount variance (+$50.00)" — YELLOW warning
   - Electric: "📅 Upcoming (2 days)" — BLUE informational
   - Salary: "✅ Paid on time" — GREEN success

4. **User focuses on Netflix (missing payment):**
   - Clicks "Link Transaction" button on Netflix card
   - Transaction search modal opens (see Journey 3)

5. **User focuses on Rent (amount variance):**
   - Reads: "Expected: $1,200.00 / Actual: $1,250.00"
   - Clicks "Update Expected" button
   - Quick update dialog:
     ```
     ┌────────────────────────────────────────────┐
     │ Update Expected Amount                     │
     ├────────────────────────────────────────────┤
     │ Series: Rent - Monthly                     │
     │                                            │
     │ Current variance:                          │
     │ Expected: $1,200.00                        │
     │ Actual: $1,250.00                          │
     │ Difference: +$50.00                        │
     │                                            │
     │ New Expected Amount *                      │
     │ [$1,250.00________________________]        │
     │                                            │
     │ ⓘ This will update all future expected    │
     │   instances. Past instances remain linked. │
     │                                            │
     │ [Cancel]              [Update Expected]    │
     └────────────────────────────────────────────┘
     ```
   - User clicks "Update Expected"
   - Rent card updates: "✅ Paid on time" (variance resolved)

6. **User applies status filter:**
   - Clicks "[Status: All ▼]" dropdown
   - Options:
     ```
     ┌─────────────────────┐
     │ All Statuses ✓      │
     │ Missing Only        │
     │ Variance Only       │
     │ Upcoming Only       │
     │ Paid Only           │
     └─────────────────────┘
     ```
   - Selects "Missing Only"
   - View filters to show only Netflix

**Outcome:** User can quickly scan all recurring payments, identify issues (missing, variance, upcoming), and take action.

**Duration:** ~3 minutes

---

### Journey 3: User Manually Links Transaction to Series

**Context:** User sees "🔴 Missing" status on Netflix series. They check their credit card statement and find the Netflix transaction, but it wasn't auto-linked (wrong counterparty name: "NETFLIX.COM" vs "Netflix").

**Steps:**

1. **Entry point:** User clicks "Link Transaction" on Netflix series card
   - Manual link modal opens

2. **Transaction search interface appears:**
   ```
   ┌────────────────────────────────────────────────────┐
   │ Link Transaction to Series                     × │
   ├────────────────────────────────────────────────────┤
   │ Series: Netflix ($15.99)                           │
   │ Expected: Nov 15, 2024                             │
   │ Account: BofA Credit                               │
   ├────────────────────────────────────────────────────┤
   │                                                    │
   │ Search transactions... [____________] 🔍           │
   │ Date range: [Nov 12 - Nov 18, 2024 ▼]             │
   │                                                    │
   │ Suggested Matches (2):                             │
   │                                                    │
   │ ┌──────────────────────────────────────────────┐  │
   │ │ Nov 16, 2024  NETFLIX.COM         -$15.99    │  │
   │ │ BofA Credit                                  │  │
   │ │ ⚠️  Amount match • Date match • Account match│  │
   │ │ Counterparty: "NETFLIX.COM" (not exact)      │  │
   │ │                                              │  │
   │ │ [Link This Transaction]                      │  │
   │ └──────────────────────────────────────────────┘  │
   │                                                    │
   │ ┌──────────────────────────────────────────────┐  │
   │ │ Nov 15, 2024  Netflix Support      -$5.00    │  │
   │ │ BofA Credit                                  │  │
   │ │ ⚠️  Counterparty match • Date match          │  │
   │ │ Amount mismatch: $5.00 vs $15.99             │  │
   │ │                                              │  │
   │ │ [Link Anyway]                                │  │
   │ └──────────────────────────────────────────────┘  │
   │                                                    │
   │ No other matches found                             │
   │                                                    │
   │ [Cancel]                      [Search All Dates]   │
   └────────────────────────────────────────────────────┘
   ```

3. **User reviews suggested matches:**
   - First match: "NETFLIX.COM" - Amount, date, account all match
   - Second match: "Netflix Support" - Wrong amount ($5 vs $15.99)
   - User identifies: First match is correct

4. **User clicks "Link This Transaction":**
   - Confirmation dialog appears:
     ```
     ┌────────────────────────────────────────────┐
     │ Confirm Transaction Link                   │
     ├────────────────────────────────────────────┤
     │ Link this transaction to series?           │
     │                                            │
     │ Transaction:                               │
     │ Nov 16, 2024 • NETFLIX.COM • -$15.99       │
     │ BofA Credit                                │
     │                                            │
     │ Series:                                    │
     │ Netflix • Monthly on day 15 • $15.99       │
     │                                            │
     │ ✅ Amount matches                          │
     │ ✅ Date within window (±3 days)            │
     │ ✅ Account matches                         │
     │ ⚠️  Counterparty: "NETFLIX.COM" vs "Netflix"│
     │                                            │
     │ Update counterparty?                       │
     │ ☑ Link "NETFLIX.COM" as alias for Netflix  │
     │                                            │
     │ [Cancel]                    [Confirm Link] │
     └────────────────────────────────────────────┘
     ```

5. **User confirms with alias linking:**
   - Checkbox checked: "Link 'NETFLIX.COM' as alias for Netflix"
   - Clicks "Confirm Link"
   - Success toast: "✅ Transaction linked to Netflix series"
   - Modal closes

6. **User returns to Series Manager:**
   - Netflix card now shows:
     ```
     │ 📅 Netflix                          $15.99   │
     │ BofA Credit • Netflix                        │
     │ Monthly on day 15                            │
     │                                              │
     │ ✅ Paid on time (manually linked)            │
     │ Last: Nov 16, 2024 ($15.99)                  │
     │ Next: Dec 15, 2024                           │
     │                                              │
     │ [View History] [Edit]                        │
     ```
   - Status changed: "🔴 Missing" → "✅ Paid on time"
   - Badge note: "(manually linked)"

7. **Benefit of alias linking:**
   - Future transactions from "NETFLIX.COM" will auto-link
   - No need for manual linking next month
   - User thinks: "Great! It'll auto-link from now on."

**Outcome:** User successfully linked missing transaction, created counterparty alias, and resolved missing payment alert. Future transactions will auto-link.

**Duration:** ~2 minutes

---

### Journey 4: User Edits Series After Price Increase

**Context:** User's Spotify Premium increased from $9.99 to $10.99. December payment arrives at $10.99, triggering variance alert. User needs to update series expected amount.

**Steps:**

1. **Entry point:** User sees variance alert on Spotify card
   ```
   │ 📅 Spotify Premium                  $9.99    │
   │ Chase Credit • Spotify                       │
   │ Monthly on day 1                             │
   │                                              │
   │ ⚠️  Amount variance (+$1.00)                 │
   │ Expected: $9.99                              │
   │ Actual: $10.99 (Dec 1, 2024)                 │
   │                                              │
   │ [Update Expected] [View History] [Edit]      │
   ```

2. **User clicks "Edit" button:**
   - Edit Series modal opens with pre-filled values:
     ```
     ┌────────────────────────────────────────────┐
     │ Edit Series                            × │
     ├────────────────────────────────────────────┤
     │ Series Name *                              │
     │ [Spotify Premium__________________]        │
     │                                            │
     │ Account                                    │
     │ [Chase Credit ▼] (disabled)                │
     │ ⓘ Cannot change account after creation     │
     │                                            │
     │ Counterparty                               │
     │ [Spotify ▼] (disabled)                     │
     │ ⓘ Cannot change counterparty after creation│
     │                                            │
     │ Expected Amount *                          │
     │ [$9.99_______________________________]     │
     │                                            │
     │ Tolerance (± amount)                       │
     │ [$2.00_______________________________]     │
     │                                            │
     │ [Next: Recurrence Settings →]              │
     │                                            │
     │ [Cancel]                                   │
     └────────────────────────────────────────────┘
     ```

3. **User observes immutable fields:**
   - Account field: Disabled (grayed out)
   - Counterparty field: Disabled (grayed out)
   - Tooltip explains: "Cannot change after creation"
   - User thinks: "Makes sense - changing these would break instance links"

4. **User updates expected amount:**
   - Clicks into "Expected Amount" field
   - Changes: "$9.99" → "$10.99"
   - Field now shows: "$10.99"

5. **User proceeds to recurrence settings:**
   - Clicks "Next: Recurrence Settings"
   - Recurrence dialog appears (pre-filled):
     ```
     ┌────────────────────────────────────────────┐
     │ Edit Recurrence                        × │
     ├────────────────────────────────────────────┤
     │ Spotify Premium                            │
     │ $10.99 ±$2.00 • Chase Credit               │
     ├────────────────────────────────────────────┤
     │                                            │
     │ Frequency *                                │
     │ [⦿ Monthly] [ Weekly] [ Yearly]            │
     │                                            │
     │ Day of Month *                             │
     │ [1▼]                                       │
     │                                            │
     │ Start Date                                 │
     │ [2023-06-01▼] (disabled)                   │
     │ ⓘ Cannot change start date                 │
     │                                            │
     │ End Date (optional)                        │
     │ [Never ends___________________________]    │
     │ ○ Never ends  ○ Ends on specific date     │
     │                                            │
     │ Category                                   │
     │ [Entertainment▼]                           │
     │                                            │
     │ ─────────────────────────────────          │
     │ Preview Next Occurrences:                  │
     │ • Jan 1, 2025 ($10.99) ← Updated amount    │
     │ • Feb 1, 2025 ($10.99)                     │
     │ • Mar 1, 2025 ($10.99)                     │
     │                                            │
     │ [← Back]                   [Save Changes]  │
     └────────────────────────────────────────────┘
     ```

6. **User verifies changes:**
   - Preview shows updated amount: "$10.99"
   - Frequency unchanged: "Monthly on day 1"
   - User confirms: "Looks good"

7. **User saves changes:**
   - Clicks "Save Changes"
   - Modal closes (200ms fade)
   - Success toast: "✅ Series 'Spotify Premium' updated"
   - Series card updates:
     ```
     │ 📅 Spotify Premium                 $10.99   │
     │ Chase Credit • Spotify                       │
     │ Monthly on day 1                             │
     │                                              │
     │ ✅ Paid on time                              │
     │ Last: Dec 1, 2024 ($10.99)                   │
     │ Next: Jan 1, 2025                            │
     │                                              │
     │ [View History] [Edit]                        │
     ```

8. **User verification:**
   - Expected amount changed: "$9.99" → "$10.99"
   - Variance alert cleared: "⚠️ Amount variance" → "✅ Paid on time"
   - Past instances remain linked (historical accuracy)
   - Future instances expect "$10.99"

**Outcome:** User successfully updated series after price increase. Past instances preserved at old price, future instances expect new price.

**Duration:** ~2 minutes

---

### Journey 5: User Archives Cancelled Series

**Context:** User cancelled their gym membership in December. Last payment was Dec 5, 2024. User wants to archive the series (not delete) to maintain historical records.

**Steps:**

1. **Entry point:** User on Series Manager page
   - User sees "Gym Membership" series
   - User remembers: "I cancelled this in December. Should archive it."

2. **User clicks "Archive" button on Gym Membership card:**
   - Archive confirmation dialog appears:
     ```
     ┌────────────────────────────────────────────┐
     │ Archive Series                             │
     ├────────────────────────────────────────────┤
     │ Are you sure you want to archive this      │
     │ series?                                    │
     │                                            │
     │ Series: Gym Membership                     │
     │ Account: BofA Credit                       │
     │ Frequency: Monthly on day 5                │
     │                                            │
     │ ⚠️  This series has 18 linked instances    │
     │    (Jan 2023 - Dec 2024)                   │
     │                                            │
     │ Archiving will:                            │
     │ • Stop generating expected instances       │
     │ • Hide series from active lists            │
     │ • Preserve all 18 instance links           │
     │ • Remove from SeriesSelector dropdowns     │
     │ • Keep visible in filters (show archived)  │
     │                                            │
     │ Set end date (last payment):               │
     │ [2024-12-05▼]                              │
     │                                            │
     │ You can restore this series later.         │
     │                                            │
     │ [Cancel]                   [Archive Series]│
     └────────────────────────────────────────────┘
     ```

3. **User reads confirmation details:**
   - Sees: "This series has 18 linked instances"
   - Thinks: "Good - my payment history will be preserved"
   - Reads: "Set end date (last payment): 2024-12-05"
   - Confirms: "Yes, last payment was Dec 5"

4. **User sets end date:**
   - End date field pre-filled: "2024-12-05" (date of last instance)
   - User can adjust if needed
   - Leaves as: "2024-12-05"

5. **User confirms archive:**
   - Clicks "Archive Series" button
   - Dialog closes (200ms fade)
   - Success toast: "✅ Series 'Gym Membership' archived"
   - Series Manager updates:
     ```
     ┌────────────────────────────────────────────────────┐
     │ Recurring Series (5)                [+ New Series] │
     ├────────────────────────────────────────────────────┤
     │ Search series... [____________] [Filter ▼]         │
     │                                 ☐ Show archived    │
     ├────────────────────────────────────────────────────┤
     │                                                    │
     │ SUBSCRIPTIONS (3)                                  │
     │ [Netflix, Spotify, OpenAI cards...]                │
     │                                                    │
     │ BILLS (2)                                          │
     │ [Rent, Electric cards...]                          │
     │                                                    │
     │ No gym membership visible (archived)               │
     └────────────────────────────────────────────────────┘
     ```

6. **User verification:**
   - Series count changed: "(6)" → "(5)"
   - Gym Membership no longer visible in active list
   - Filter option available: "☐ Show archived"

7. **User checks archived series:**
   - Clicks "☐ Show archived" checkbox
   - Gym Membership reappears with archived badge:
     ```
     HEALTH & FITNESS (1)
     ┌──────────────────────────────────────────────┐
     │ 📅 Gym Membership                   $45.00   │
     │ BofA Credit • 24 Hour Fitness   🗄️ ARCHIVED │
     │ Monthly on day 5 • Ended: Dec 5, 2024        │
     │                                              │
     │ Last: Dec 5, 2024 ($45.00)                   │
     │ 18 instances (Jan 2023 - Dec 2024)           │
     │                                              │
     │ [View History] [Restore] [Delete Permanently]│
     └──────────────────────────────────────────────┘
     ```

8. **User observes archived state:**
   - Badge: "🗄️ ARCHIVED"
   - End date shown: "Ended: Dec 5, 2024"
   - Action buttons: "Restore" available
   - Dangerous action: "Delete Permanently" (red text)
   - Instance count: "18 instances"

9. **User unchecks "Show archived":**
   - Gym Membership hidden again
   - User satisfied: "Good. History preserved, but won't clutter my active list."

**Outcome:** User successfully archived cancelled series. Historical instances preserved. No future instances generated. Series hidden from active lists but accessible via filter.

**Duration:** ~2 minutes

---

## Wireframes

### Wireframe 1: Empty State (Desktop)

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                                                     👤   │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│ Settings > Series                                                      │
│                                                                        │
│                                                                        │
│                                                                        │
│                               📅                                       │
│                                                                        │
│                     Track Recurring Payments                           │
│                                                                        │
│           Create series for subscriptions, bills, and                  │
│           recurring income to get alerts when payments                 │
│           are missed or amounts change.                                │
│                                                                        │
│                                                                        │
│                       [+ Create First Series]                          │
│                                                                        │
│                                                                        │
│                   Examples: Netflix subscription, rent, salary →       │
│                                                                        │
│                                                                        │
│ ─────────────────────────────────────────────────────────────────────  │
│ Use Cases:                                                             │
│ • Subscriptions: Netflix, Spotify, OpenAI, NYT                        │
│ • Bills: Rent, utilities, insurance premiums                          │
│ • Income: Salary, freelance retainers, dividends                      │
│ • Recurring expenses: Gym membership, phone bill, parking             │
│                                                                        │
│ Features:                                                              │
│ • Auto-link transactions to series                                    │
│ • Get alerts for missing payments                                     │
│ • Detect amount changes and schedule drift                            │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Wireframe 2: Series Manager List View (6 Active Series) - Desktop

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                                                     👤   │
├────────────────────────────────────────────────────────────────────────┤
│ Settings > Series                                                      │
│                                                                        │
│ Recurring Series (6)                                  [+ New Series]   │
├────────────────────────────────────────────────────────────────────────┤
│ Search series... [________________________] [Filter ▼]                │
│ [Status: All ▼]                              ☐ Show archived          │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│ SUBSCRIPTIONS (3)                                                      │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ 📅 Netflix                                          $15.99       │  │
│ │ BofA Credit • Netflix                                            │  │
│ │ Monthly on day 15                                                │  │
│ │                                                                  │  │
│ │ 🔴 Missing (3 days overdue)                                      │  │
│ │ Expected: Nov 15, 2024 ($15.99)                                  │  │
│ │ No transaction found                                             │  │
│ │                                                                  │  │
│ │ [Link Transaction] [Mark Skipped] [Edit]                         │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ 📅 Spotify Premium                                      $9.99    │  │
│ │ Chase Credit • Spotify                                           │  │
│ │ Monthly on day 1                                                 │  │
│ │                                                                  │  │
│ │ ✅ Paid on time                                                  │  │
│ │ Last: Nov 1, 2024 ($9.99)                                        │  │
│ │ Next: Dec 1, 2024                                                │  │
│ │                                                                  │  │
│ │ [View History] [Edit] [Archive]                                  │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ 📅 OpenAI ChatGPT Plus                                 $20.00    │  │
│ │ Chase Credit • OpenAI                                            │  │
│ │ Monthly on day 5                                                 │  │
│ │                                                                  │  │
│ │ 📅 Upcoming (13 days)                                            │  │
│ │ Next: Dec 5, 2024 ($20.00)                                       │  │
│ │                                                                  │  │
│ │ [View History] [Edit] [Archive]                                  │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ BILLS (2)                                                              │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ 📅 Rent - Monthly                                    $1,200.00   │  │
│ │ BofA Checking • Landlord LLC                                     │  │
│ │ Monthly on day 1                                                 │  │
│ │                                                                  │  │
│ │ ⚠️  Amount variance (+$50.00)                                    │  │
│ │ Expected: $1,200.00 • Actual: $1,250.00 (Nov 1, 2024)            │  │
│ │                                                                  │  │
│ │ [Update Expected] [View History] [Edit]                          │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ 📅 Electric Bill                                       $120.00   │  │
│ │ BofA Checking • PG&E                                             │  │
│ │ Monthly on day 20                                                │  │
│ │                                                                  │  │
│ │ 📅 Upcoming (2 days)                                             │  │
│ │ Next: Nov 20, 2024 ($120.00)                                     │  │
│ │                                                                  │  │
│ │ [View History] [Edit] [Archive]                                  │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ INCOME (1)                                                             │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ 📅 Salary (Direct Deposit)                           $4,500.00   │  │
│ │ BofA Checking • Acme Corp                                        │  │
│ │ Monthly on last Friday                                           │  │
│ │                                                                  │  │
│ │ ✅ Paid on time                                                  │  │
│ │ Last: Nov 8, 2024 ($4,500.00)                                    │  │
│ │ Next: Dec 6, 2024                                                │  │
│ │                                                                  │  │
│ │ [View History] [Edit] [Archive]                                  │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Wireframe 3: Create Series Modal - Step 1 (Basic Info) - Desktop

```
┌────────────────────────────────────────────────────────────────────────┐
│                                                                        │
│                   ┌──────────────────────────────────────┐             │
│                   │ Create Series                    × │             │
│                   ├──────────────────────────────────────┤             │
│                   │ Step 1 of 2: Basic Information      │             │
│                   ├──────────────────────────────────────┤             │
│                   │ Series Name *                        │             │
│                   │ [OpenAI ChatGPT Plus_______________] │             │
│                   │                                      │             │
│                   │ Account *                            │             │
│                   │ [Chase Credit Card ▼]                │             │
│                   │                                      │             │
│                   │ Counterparty *                       │             │
│                   │ [OpenAI ▼]                           │             │
│                   │ ⓘ Used for auto-linking transactions │             │
│                   │                                      │             │
│                   │ Expected Amount *                    │             │
│                   │ [$20.00____________________________] │             │
│                   │                                      │             │
│                   │ Tolerance (± amount)                 │             │
│                   │ [$2.00_____________________________] │             │
│                   │ ⓘ Allow variance up to ±$2.00       │             │
│                   │   (payments between $18-$22 accepted)│             │
│                   │                                      │             │
│                   │ [Next: Configure Schedule →]         │             │
│                   │                                      │             │
│                   │ [Cancel]                             │             │
│                   └──────────────────────────────────────┘             │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘

Account Dropdown (when clicked):
┌──────────────────────────────────┐
│ Search accounts... [___________] │
├──────────────────────────────────┤
│ CHECKING ACCOUNTS                │
│   BofA Personal Checking    USD  │
│   Chase Business Checking   USD  │
│                                  │
│ CREDIT CARD ACCOUNTS             │
│ ✓ Chase Credit Card         USD  │
│   BofA Credit               USD  │
└──────────────────────────────────┘

Counterparty Dropdown (when clicked):
┌──────────────────────────────────┐
│ Search counterparties... [_____] │
├──────────────────────────────────┤
│ RECENT                           │
│ ✓ OpenAI                         │
│   Netflix                        │
│   Spotify                        │
│                                  │
│ ALL COUNTERPARTIES (127)         │
│   Acme Corp                      │
│   Amazon                         │
│   ...                            │
├──────────────────────────────────┤
│ + Create New Counterparty        │
└──────────────────────────────────┘
```

---

### Wireframe 4: RecurrenceConfigDialog - Step 2 (Schedule) - Desktop

```
┌────────────────────────────────────────────────────────────────────────┐
│                                                                        │
│                   ┌──────────────────────────────────────┐             │
│                   │ Configure Recurrence             × │             │
│                   ├──────────────────────────────────────┤             │
│                   │ Step 2 of 2: Schedule Settings       │             │
│                   ├──────────────────────────────────────┤             │
│                   │ OpenAI ChatGPT Plus                  │             │
│                   │ $20.00 ±$2.00 • Chase Credit Card    │             │
│                   ├──────────────────────────────────────┤             │
│                   │                                      │             │
│                   │ Frequency *                          │             │
│                   │ [⦿ Monthly] [ Weekly] [ Yearly]      │             │
│                   │ [ Daily]    [ Custom]                │             │
│                   │                                      │             │
│                   │ Day of Month *                       │             │
│                   │ [5▼]                                 │             │
│                   │ ⓘ For end-of-month dates (29-31),   │             │
│                   │   system uses last day if month      │             │
│                   │   is shorter                         │             │
│                   │                                      │             │
│                   │ Start Date *                         │             │
│                   │ [2024-01-05▼]                        │             │
│                   │ ⓘ Date of first expected payment    │             │
│                   │                                      │             │
│                   │ End Date (optional)                  │             │
│                   │ [Never ends________________________] │             │
│                   │ ⦿ Never ends                         │             │
│                   │ ○ Ends on specific date              │             │
│                   │                                      │             │
│                   │ Category (optional)                  │             │
│                   │ [Software & SaaS▼]                   │             │
│                   │                                      │             │
│                   │ ─────────────────────────────────    │             │
│                   │ Preview Next Occurrences:            │             │
│                   │ • Feb 5, 2024 ($20.00)               │             │
│                   │ • Mar 5, 2024 ($20.00)               │             │
│                   │ • Apr 5, 2024 ($20.00)               │             │
│                   │                                      │             │
│                   │ [← Back]             [Create Series] │             │
│                   └──────────────────────────────────────┘             │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘

Frequency Options (when selected):

MONTHLY (selected):
┌──────────────────────────────────┐
│ Day of Month *                   │
│ [5▼] (1-31 or "Last day")        │
│                                  │
│ Interval (optional)              │
│ [1▼] (Every N months)            │
└──────────────────────────────────┘

WEEKLY:
┌──────────────────────────────────┐
│ Day of Week *                    │
│ [Friday▼]                        │
│                                  │
│ Interval (optional)              │
│ [1▼] (Every N weeks)             │
└──────────────────────────────────┘

YEARLY:
┌──────────────────────────────────┐
│ Month *                          │
│ [January▼]                       │
│                                  │
│ Day *                            │
│ [15▼]                            │
└──────────────────────────────────┘

CUSTOM:
┌──────────────────────────────────┐
│ Specific Dates:                  │
│ [2024-01-15▼] [+ Add]            │
│ [2024-07-15▼] [Remove]           │
│                                  │
│ ⓘ For irregular schedules        │
└──────────────────────────────────┘
```

---

### Wireframe 5: Series Detail with Instance History

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                                                     👤   │
├────────────────────────────────────────────────────────────────────────┤
│ ← Back to Series                                                       │
│                                                                        │
│ Netflix                                                                │
│ $15.99 ±$2.00 • Monthly on day 15                                      │
│ BofA Credit • Netflix                                                  │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│ [Edit Series] [Archive Series]                                         │
│                                                                        │
│ Status: 🔴 Missing (3 days overdue)                                    │
│ Expected: Nov 15, 2024 ($15.99)                                        │
│ No transaction found                                                   │
│                                                                        │
│ [Link Transaction] [Mark as Skipped]                                   │
│                                                                        │
├────────────────────────────────────────────────────────────────────────┤
│ Instance History (Last 12 months)                                      │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ Nov 2024                                          🔴 Missing      │  │
│ │ Expected: Nov 15, 2024 ($15.99)                                  │  │
│ │ Actual: No transaction found                                     │  │
│ │ Overdue: 3 days                                                  │  │
│ │                                                                  │  │
│ │ [Link Transaction] [Mark Skipped]                                │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ Oct 2024                                          ✅ Paid        │  │
│ │ Expected: Oct 15, 2024 ($15.99)                                  │  │
│ │ Actual: Oct 15, 2024 ($15.99) • NETFLIX.COM                      │  │
│ │ Variance: $0.00 • Auto-linked                                    │  │
│ │                                                                  │  │
│ │ [View Transaction] [Unlink]                                      │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ Sep 2024                                          ✅ Paid        │  │
│ │ Expected: Sep 15, 2024 ($15.99)                                  │  │
│ │ Actual: Sep 16, 2024 ($15.99) • NETFLIX.COM                      │  │
│ │ Variance: $0.00 • Date: +1 day • Auto-linked                     │  │
│ │                                                                  │  │
│ │ [View Transaction] [Unlink]                                      │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ Aug 2024                                          ⚠️  Variance   │  │
│ │ Expected: Aug 15, 2024 ($15.99)                                  │  │
│ │ Actual: Aug 15, 2024 ($17.99) • NETFLIX.COM                      │  │
│ │ Variance: +$2.00 • Outside tolerance • Auto-linked               │  │
│ │                                                                  │  │
│ │ [View Transaction] [Unlink] [Update Expected]                    │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ ┌──────────────────────────────────────────────────────────────────┐  │
│ │ Jul 2024                                          ⊘ Skipped      │  │
│ │ Expected: Jul 15, 2024 ($15.99)                                  │  │
│ │ User marked as skipped                                           │  │
│ │ Note: "On vacation, cancelled for one month"                     │  │
│ │                                                                  │  │
│ │ [Link Transaction Anyway]                                        │  │
│ └──────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│ [Show Earlier Instances...] (Jan 2024 - Jun 2024)                     │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Wireframe 6: Variance Alerts Panel (Summary View)

```
┌────────────────────────────────────────────────────────────────────────┐
│ ☰ Finance App                                                     👤   │
├────────────────────────────────────────────────────────────────────────┤
│ Dashboard > Series Alerts                                              │
│                                                                        │
│ ┌────────────────────────────────────────────────────────────────────┐│
│ │ ⚠️  Series Alerts (3 issues)                                        ││
│ ├────────────────────────────────────────────────────────────────────┤│
│ │                                                                    ││
│ │ 🔴 MISSING PAYMENTS (1)                                            ││
│ │                                                                    ││
│ │ ┌──────────────────────────────────────────────────────────────┐  ││
│ │ │ Netflix                                          $15.99       │  ││
│ │ │ Expected: Nov 15, 2024 • Overdue: 3 days                     │  ││
│ │ │                                                              │  ││
│ │ │ [Link Transaction] [Mark Skipped] [View Details]            │  ││
│ │ └──────────────────────────────────────────────────────────────┘  ││
│ │                                                                    ││
│ │ ⚠️  AMOUNT VARIANCE (2)                                            ││
│ │                                                                    ││
│ │ ┌──────────────────────────────────────────────────────────────┐  ││
│ │ │ Rent - Monthly                                  $1,200.00     │  ││
│ │ │ Expected: $1,200.00 • Actual: $1,250.00 (+$50.00)            │  ││
│ │ │                                                              │  ││
│ │ │ [Update Expected] [Keep Current] [View Details]             │  ││
│ │ └──────────────────────────────────────────────────────────────┘  ││
│ │                                                                    ││
│ │ ┌──────────────────────────────────────────────────────────────┐  ││
│ │ │ Spotify Premium                                     $9.99     │  ││
│ │ │ Expected: $9.99 • Actual: $10.99 (+$1.00)                    │  ││
│ │ │                                                              │  ││
│ │ │ [Update Expected] [Keep Current] [View Details]             │  ││
│ │ └──────────────────────────────────────────────────────────────┘  ││
│ │                                                                    ││
│ │ 📅 UPCOMING (Next 7 Days)                                          ││
│ │                                                                    ││
│ │ • Nov 20: Electric Bill ($120.00)                                  ││
│ │ • Nov 22: Phone Bill ($85.00)                                      ││
│ │ • Nov 24: Car Insurance ($150.00)                                  ││
│ │                                                                    ││
│ │ [View All Series →]                                                ││
│ └────────────────────────────────────────────────────────────────────┘│
│                                                                        │
│ Other Dashboard Widgets...                                             │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

### Wireframe 7: SeriesSelector Dropdown (in Transaction Edit)

```
┌────────────────────────────────────────────────────────────────────────┐
│                                                                        │
│                   ┌──────────────────────────────────────┐             │
│                   │ Edit Transaction                 × │             │
│                   ├──────────────────────────────────────┤             │
│                   │ Date                                 │             │
│                   │ [2024-11-16▼]                        │             │
│                   │                                      │             │
│                   │ Amount                               │             │
│                   │ [-$15.99___________________________] │             │
│                   │                                      │             │
│                   │ Account                              │             │
│                   │ [BofA Credit ▼]                      │             │
│                   │                                      │             │
│                   │ Counterparty                         │             │
│                   │ [NETFLIX.COM ▼]                      │             │
│                   │                                      │             │
│                   │ Link to Series (optional)            │             │
│                   │ [Select series ▼] ← clicked          │             │
│                   │  ↓                                   │             │
│                   │  ┌────────────────────────────────┐  │             │
│                   │  │ Search series... [___________] │  │             │
│                   │  ├────────────────────────────────┤  │             │
│                   │  │ SUGGESTED (based on account +  │  │             │
│                   │  │            counterparty)       │  │             │
│                   │  │ ✓ Netflix                      │  │             │
│                   │  │   $15.99 • Monthly on day 15   │  │             │
│                   │  │   Next: Dec 15, 2024           │  │             │
│                   │  │                                │  │             │
│                   │  │ SUBSCRIPTIONS (2 more)         │  │             │
│                   │  │   Spotify Premium              │  │             │
│                   │  │   $9.99 • Monthly on day 1     │  │             │
│                   │  │                                │  │             │
│                   │  │   OpenAI ChatGPT Plus          │  │             │
│                   │  │   $20.00 • Monthly on day 5    │  │             │
│                   │  │                                │  │             │
│                   │  │ BILLS (2)                      │  │             │
│                   │  │   Rent - Monthly               │  │             │
│                   │  │   $1,200.00 • Monthly on day 1 │  │             │
│                   │  │   ...                          │  │             │
│                   │  ├────────────────────────────────┤  │             │
│                   │  │ + Create New Series            │  │             │
│                   │  └────────────────────────────────┘  │             │
│                   │                                      │             │
│                   │ Category                             │             │
│                   │ [Entertainment ▼]                    │             │
│                   │                                      │             │
│                   │ [Cancel]          [Save Transaction] │             │
│                   └──────────────────────────────────────┘             │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘

After selecting Netflix:
┌──────────────────────────────────────┐
│ Link to Series (optional)            │
│ [Netflix ▼]                          │
│ ✅ Will link to "Netflix" series     │
│                                      │
│ Expected: Nov 15, 2024 ($15.99)      │
│ This transaction: Nov 16, 2024       │
│ Within tolerance: ±$2.00             │
└──────────────────────────────────────┘
```

---

### Wireframe 8: Manual Link Confirmation Dialog

```
┌────────────────────────────────────────────────────────────────────────┐
│                                                                        │
│                                                                        │
│                   ┌──────────────────────────────────────┐             │
│                   │ Confirm Transaction Link             │             │
│                   ├──────────────────────────────────────┤             │
│                   │ Link this transaction to series?     │             │
│                   │                                      │             │
│                   │ Transaction:                         │             │
│                   │ Nov 16, 2024                         │             │
│                   │ NETFLIX.COM • -$15.99                │             │
│                   │ BofA Credit                          │             │
│                   │                                      │             │
│                   │ Series:                              │             │
│                   │ Netflix                              │             │
│                   │ Monthly on day 15 • $15.99           │             │
│                   │                                      │             │
│                   │ ✅ Amount matches ($15.99)           │             │
│                   │ ✅ Date within window (±3 days)      │             │
│                   │    Expected: Nov 15, Actual: Nov 16  │             │
│                   │ ✅ Account matches (BofA Credit)     │             │
│                   │ ⚠️  Counterparty mismatch:           │             │
│                   │    "NETFLIX.COM" vs "Netflix"        │             │
│                   │                                      │             │
│                   │ Create counterparty alias?           │             │
│                   │ ☑ Link "NETFLIX.COM" as alias for    │             │
│                   │   "Netflix" (recommended)            │             │
│                   │                                      │             │
│                   │ ⓘ Future transactions from           │             │
│                   │   "NETFLIX.COM" will auto-link       │             │
│                   │                                      │             │
│                   │ [Cancel]             [Confirm Link]  │             │
│                   └──────────────────────────────────────┘             │
│                                                                        │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘

Amount variance scenario (force link required):
┌──────────────────────────────────────┐
│ Confirm Transaction Link             │
├──────────────────────────────────────┤
│ Transaction:                         │
│ Nov 16, 2024 • NETFLIX.COM • -$18.99 │
│                                      │
│ Series:                              │
│ Netflix • $15.99 ±$2.00              │
│                                      │
│ ✅ Date within window                │
│ ✅ Account matches                   │
│ ❌ Amount outside tolerance          │
│    Expected: $15.99 ±$2.00           │
│    Actual: $18.99                    │
│    Variance: +$3.00 (exceeds ±$2.00) │
│                                      │
│ Force link anyway?                   │
│ ☐ Link despite amount variance       │
│   (will mark as "variance" status)   │
│                                      │
│ Alternative:                         │
│ • Update series tolerance to ±$3.00  │
│ • Update expected amount to $18.99   │
│                                      │
│ [Update Series] [Cancel] [Force Link]│
└──────────────────────────────────────┘
```

---

### Wireframe 9: Archive Confirmation Dialog

```
┌────────────────────────────────────────────────────────────────────────┐
│                                                                        │
│                                                                        │
│                   ┌──────────────────────────────────────┐             │
│                   │ Archive Series                       │             │
│                   ├──────────────────────────────────────┤             │
│                   │ Are you sure you want to archive     │             │
│                   │ this series?                         │             │
│                   │                                      │             │
│                   │ Series: Gym Membership               │             │
│                   │ Account: BofA Credit                 │             │
│                   │ Counterparty: 24 Hour Fitness        │             │
│                   │ Frequency: Monthly on day 5          │             │
│                   │                                      │             │
│                   │ ⚠️  This series has 18 linked        │             │
│                   │    instances (Jan 2023 - Dec 2024)   │             │
│                   │                                      │             │
│                   │ Archiving will:                      │             │
│                   │ • Stop generating expected instances │             │
│                   │ • Hide series from active lists      │             │
│                   │ • Preserve all 18 instance links     │             │
│                   │ • Remove from SeriesSelector menus   │             │
│                   │ • Keep visible when "Show archived"  │             │
│                   │   filter is enabled                  │             │
│                   │                                      │             │
│                   │ Set end date (last payment):         │             │
│                   │ [2024-12-05▼]                        │             │
│                   │ ⓘ No instances expected after this   │             │
│                   │   date                               │             │
│                   │                                      │             │
│                   │ You can restore this series later.   │             │
│                   │                                      │             │
│                   │ [Cancel]            [Archive Series] │             │
│                   └──────────────────────────────────────┘             │
│                                                                        │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘

Zero instances scenario:
┌──────────────────────────────────────┐
│ Archive Series                       │
├──────────────────────────────────────┤
│ Series: Test Subscription            │
│                                      │
│ ⓘ This series has no linked          │
│   instances yet.                     │
│                                      │
│ Archiving will hide it from active   │
│ lists. You can restore it later.     │
│                                      │
│ Alternative:                         │
│ • Delete series permanently (no      │
│   history to preserve)               │
│                                      │
│ [Delete] [Cancel] [Archive]          │
└──────────────────────────────────────┘
```

---

## Interaction Details

### Keyboard Shortcuts

**Series Manager Page:**
- `N` → Open "New Series" modal (when not in input field)
- `Cmd/Ctrl + F` → Focus search box
- `ESC` → Clear search (if active), or navigate back
- `↓` / `↑` → Navigate between series cards (when search focused)
- `Enter` → Open detail view for focused series
- `/` → Focus search box (alternative)

**Create/Edit Series Modal:**
- `Tab` → Move to next field
- `Shift + Tab` → Move to previous field
- `ESC` → Close modal (if no unsaved changes)
- `Cmd/Ctrl + Enter` → Save series (from any field)
- `Cmd/Ctrl + S` → Save series (alternative)

**RecurrenceConfigDialog:**
- `Tab` → Navigate frequency options
- `Space` → Select frequency radio button
- `↓` / `↑` → Navigate dropdown options (day, month)
- `Enter` → Confirm selection

**SeriesSelector Dropdown (in transaction edit):**
- `↓` / `↑` → Navigate series options
- `Enter` → Select highlighted series
- `ESC` → Close dropdown without selecting
- `Type to search` → Filter series in real-time
- `Tab` → Close dropdown and move to next field

---

### Validation Feedback

**Series Name Validation:**

```
Duplicate name error:
┌──────────────────────────────────────┐
│ Series Name *                        │
│ [Netflix_________________________]   │
│ ❌ Series name already exists        │
│                                      │
│ Suggested: Netflix 2                 │
│                                      │
│ [Use "Netflix 2"]                    │
└──────────────────────────────────────┘

Empty name error:
┌──────────────────────────────────────┐
│ Series Name *                        │
│ [________________________________]   │
│ ❌ Series name is required           │
└──────────────────────────────────────┘
```

**Expected Amount Validation:**

```
Zero amount error:
┌──────────────────────────────────────┐
│ Expected Amount *                    │
│ [$0.00___________________________]   │
│ ❌ Amount must be non-zero           │
│                                      │
│ ⓘ For tracking only (any amount):   │
│   Set large tolerance (e.g., $9999)  │
└──────────────────────────────────────┘

Invalid amount format:
┌──────────────────────────────────────┐
│ Expected Amount *                    │
│ [$20.999_________________________]   │
│ ❌ Maximum 2 decimal places          │
│                                      │
│ Did you mean: $21.00?                │
└──────────────────────────────────────┘
```

**Tolerance Validation:**

```
Negative tolerance error:
┌──────────────────────────────────────┐
│ Tolerance (± amount)                 │
│ [-$5.00__________________________]   │
│ ❌ Tolerance must be >= 0            │
│                                      │
│ Suggested: $5.00                     │
└──────────────────────────────────────┘
```

**Start Date Validation:**

```
Future date error:
┌──────────────────────────────────────┐
│ Start Date *                         │
│ [2025-12-31▼]                        │
│ ❌ Start date cannot be in future    │
│                                      │
│ Use today's date: 2024-11-18         │
└──────────────────────────────────────┘
```

---

### Success/Error States

**Series Created Success:**

```
Toast (top-right, auto-dismiss after 3s):
┌──────────────────────────────────────────────┐
│ ✅ Series 'OpenAI ChatGPT Plus' created      │
│ Next expected: Feb 5, 2024 ($20.00)          │
└──────────────────────────────────────────────┘

Series card animates in (slide from top, 300ms):
┌──────────────────────────────────────────────┐
│ 📅 OpenAI ChatGPT Plus              $20.00   │ ← New card
│ Chase Credit • OpenAI                        │
│ Monthly on day 5                             │
│                                              │
│ 📅 Upcoming                                  │
│ Next: Feb 5, 2024 ($20.00)                   │
└──────────────────────────────────────────────┘
```

**Transaction Linked Success:**

```
Toast (top-right, auto-dismiss after 3s):
┌──────────────────────────────────────────────┐
│ ✅ Transaction linked to Netflix series      │
│ Counterparty alias created                   │
└──────────────────────────────────────────────┘

Series card updates (status change animation):
Before:
│ 🔴 Missing (3 days overdue)                  │

After (200ms fade transition):
│ ✅ Paid on time (manually linked)            │
│ Last: Nov 16, 2024 ($15.99)                  │
```

**Series Updated Success:**

```
Toast:
┌──────────────────────────────────────────────┐
│ ✅ Series 'Spotify Premium' updated          │
│ Expected amount: $9.99 → $10.99              │
└──────────────────────────────────────────────┘

Updated fields highlight (300ms yellow flash):
│ Expected Amount: $10.99                      │ ← Highlighted
```

**Series Archived Success:**

```
Toast (with undo action):
┌──────────────────────────────────────────────┐
│ ✅ Series 'Gym Membership' archived          │
│ [Undo]                                       │ ← Undo available (4s)
└──────────────────────────────────────────────┘

Card fades out (300ms):
│ 📅 Gym Membership                   $45.00   │ ← Fading
│ ...                                          │
```

**Auto-Link Failure (Variance):**

```
Series card shows variance alert:
┌──────────────────────────────────────────────┐
│ 📅 Spotify Premium                  $9.99    │
│ ⚠️  Amount variance (+$1.00)                 │
│ Expected: $9.99                              │
│ Actual: $10.99 (Dec 1, 2024)                 │
│                                              │
│ [Update Expected] [View Details]             │
└──────────────────────────────────────────────┘

Notification (if enabled):
"Spotify Premium: Amount changed from $9.99 to $10.99"
```

**Missing Payment Alert:**

```
Series card shows missing status:
┌──────────────────────────────────────────────┐
│ 📅 Netflix                          $15.99   │
│ 🔴 Missing (3 days overdue)                  │
│ Expected: Nov 15, 2024 ($15.99)              │
│ No transaction found                         │
│                                              │
│ [Link Transaction] [Mark Skipped]            │
└──────────────────────────────────────────────┘

Email notification (daily digest):
"Recurring Payment Missing: Netflix ($15.99) expected Nov 15"
```

---

### Search and Filter Interactions

**Real-time Search (Series Manager):**

```
User types "netflix" in search:

Before typing:
┌────────────────────────────────────────────┐
│ Search series... [__________________]      │
├────────────────────────────────────────────┤
│ SUBSCRIPTIONS (3)                          │
│ BILLS (2)                                  │
│ INCOME (1)                                 │
└────────────────────────────────────────────┘

While typing "n":
┌────────────────────────────────────────────┐
│ Search series... [n_________________]      │
├────────────────────────────────────────────┤
│ Filtering... (200ms debounce)              │
└────────────────────────────────────────────┘

After debounce, "netflix":
┌────────────────────────────────────────────┐
│ Search series... [netflix___________]      │
│ Showing 1 of 6 series                      │
├────────────────────────────────────────────┤
│ SUBSCRIPTIONS (1)                          │
│ ┌────────────────────────────────────────┐ │
│ │ 📅 Netflix                  $15.99     │ │
│ │ BofA Credit • Netflix                  │ │
│ │ 🔴 Missing (3 days overdue)            │ │
│ └────────────────────────────────────────┘ │
└────────────────────────────────────────────┘

Search matches:
- Series name (Netflix)
- Counterparty (Netflix)
- Account (if contains term)
- Category (if contains term)
```

**Status Filter:**

```
Filter dropdown:
┌─────────────────────┐
│ Status: All ▼       │
│  ↓                  │
│ ┌─────────────────┐ │
│ │ All Statuses ✓  │ │
│ │ Missing Only    │ │
│ │ Variance Only   │ │
│ │ Upcoming Only   │ │
│ │ Paid Only       │ │
│ └─────────────────┘ │
└─────────────────────┘

After selecting "Missing Only":
┌────────────────────────────────────────────┐
│ [Status: Missing ×]                        │
│ Showing 1 of 6 series                      │
├────────────────────────────────────────────┤
│ SUBSCRIPTIONS (1)                          │
│ ┌────────────────────────────────────────┐ │
│ │ 📅 Netflix                  $15.99     │ │
│ │ 🔴 Missing (3 days overdue)            │ │
│ └────────────────────────────────────────┘ │
└────────────────────────────────────────────┘
```

**Category Filter:**

```
Filter by category:
┌─────────────────────┐
│ [Filter ▼]          │
│  ↓                  │
│ ┌─────────────────┐ │
│ │ Category        │ │
│ ├─────────────────┤ │
│ │ ☑ All           │ │
│ │ ☐ Subscriptions │ │
│ │ ☐ Bills         │ │
│ │ ☐ Income        │ │
│ │ ☐ Entertainment │ │
│ │ ☐ Software      │ │
│ └─────────────────┘ │
└─────────────────────┘

After selecting "Subscriptions" only:
┌────────────────────────────────────────────┐
│ [Category: Subscriptions ×]                │
│ Showing 3 of 6 series                      │
├────────────────────────────────────────────┤
│ SUBSCRIPTIONS (3)                          │
│ [Netflix, Spotify, OpenAI cards...]        │
└────────────────────────────────────────────┘
```

---

### Mobile vs Desktop Considerations

**Mobile-Specific Behaviors:**

1. **Series List (Stacked Cards):**
   ```
   ┌──────────────────────────┐
   │ ☰  Series (6)        👤  │
   ├──────────────────────────┤
   │ [Search...] [Filter ▼]   │
   │ ☐ Show archived          │
   ├──────────────────────────┤
   │ SUBSCRIPTIONS (3)        │
   │                          │
   │ ┌──────────────────────┐ │
   │ │ 📅 Netflix   $15.99  │ │
   │ │ BofA Credit          │ │
   │ │                      │ │
   │ │ 🔴 Missing (3 days)  │ │
   │ │ Expected: Nov 15     │ │
   │ │                      │ │
   │ │ [Link] [Skip] [Edit] │ │
   │ └──────────────────────┘ │
   │                          │
   │ ┌──────────────────────┐ │
   │ │ 📅 Spotify   $9.99   │ │
   │ │ Chase Credit         │ │
   │ │                      │ │
   │ │ ✅ Paid on time      │ │
   │ │ Last: Nov 1          │ │
   │ │ Next: Dec 1          │ │
   │ │                      │ │
   │ │ [View] [Edit]        │ │
   │ └──────────────────────┘ │
   │                          │
   │ [...]                    │
   └──────────────────────────┘
   ```

2. **Create Series (Full Screen Modal):**
   ```
   ┌──────────────────────────┐
   │ ← Create Series          │
   ├──────────────────────────┤
   │ Step 1 of 2              │
   │                          │
   │ Series Name *            │
   │ [OpenAI ChatGPT Plus___] │
   │                          │
   │ Account *                │
   │ [Chase Credit Card ▼]    │
   │                          │
   │ Counterparty *           │
   │ [OpenAI ▼]               │
   │                          │
   │ Expected Amount *        │
   │ [$20.00________________] │
   │                          │
   │ Tolerance                │
   │ [$2.00_________________] │
   │                          │
   │                          │
   │ [Next: Schedule →]       │
   │                          │
   │ [Cancel]                 │
   └──────────────────────────┘
   ```

3. **Touch Targets:**
   - Minimum button size: 44x44px
   - Card tap area: Full card
   - Swipe gestures:
     - Swipe left → Show quick actions (link, edit, archive)
     - Swipe right → Dismiss actions
   - Long press → Quick edit menu

4. **SeriesSelector (Bottom Sheet):**
   ```
   Transaction Edit View:
   ┌──────────────────────────┐
   │ Edit Transaction         │
   ├──────────────────────────┤
   │ Amount                   │
   │ [-$15.99_______________] │
   │                          │
   │ Link to Series           │
   │ [Select series ▼]        │ ← Tapped
   └──────────────────────────┘
           ↓
   Bottom sheet slides up:
   ┌──────────────────────────┐
   │ ━━━ (drag handle)        │
   ├──────────────────────────┤
   │ Link to Series           │
   ├──────────────────────────┤
   │ [Search series...]       │
   ├──────────────────────────┤
   │ SUGGESTED                │
   │ ✓ Netflix                │
   │   $15.99 • Monthly       │
   │                          │
   │ SUBSCRIPTIONS (2)        │
   │   Spotify Premium        │
   │   $9.99 • Monthly        │
   │                          │
   │   OpenAI ChatGPT         │
   │   $20.00 • Monthly       │
   │                          │
   │ + Create New Series      │
   └──────────────────────────┘
   ```

**Desktop-Specific Features:**

1. **Hover States:**
   - Series card hover → Highlight border (blue, 2px)
   - Button hover → Background lightens
   - Missing status hover → Red glow

2. **Multi-column Layout (wide screens >1400px):**
   ```
   ┌─────────────────────────┬─────────────────────────┐
   │ SUBSCRIPTIONS (3)       │ BILLS (2)               │
   │ ┌─────────────────────┐ │ ┌─────────────────────┐ │
   │ │ Netflix             │ │ │ Rent - Monthly      │ │
   │ └─────────────────────┘ │ └─────────────────────┘ │
   │ ┌─────────────────────┐ │ ┌─────────────────────┐ │
   │ │ Spotify             │ │ │ Electric Bill       │ │
   │ └─────────────────────┘ │ └─────────────────────┘ │
   │ ┌─────────────────────┐ │                         │
   │ │ OpenAI ChatGPT      │ │ INCOME (1)              │
   │ └─────────────────────┘ │ ┌─────────────────────┐ │
   │                         │ │ Salary              │ │
   │                         │ └─────────────────────┘ │
   └─────────────────────────┴─────────────────────────┘
   ```

3. **Keyboard-only navigation:**
   - Tab stops: Search → Filter → Status filter → Each series card → Actions
   - Focus indicators: 2px blue outline

---

## Edge Cases

### Edge Case 1: Last Day of Month Series (Feb 29/30/31)

**Scenario:** User creates series "Rent - Monthly" on day 31. February has only 28/29 days.

**System Behavior:**

```
1. User creates series:
   - Day of month: 31
   - Start date: Jan 31, 2024

2. RecurrenceEngine calculates expected instances:
   - Jan 31, 2024 ✅
   - Feb 29, 2024 ✅ (leap year, uses last day)
   - Mar 31, 2024 ✅
   - Apr 30, 2024 ✅ (April has 30 days, uses last day)
   - May 31, 2024 ✅

3. Preview shows:
   ┌────────────────────────────────────┐
   │ Preview Next Occurrences:          │
   │ • Feb 29, 2024 ($1,200.00) *       │
   │ • Mar 31, 2024 ($1,200.00)         │
   │ • Apr 30, 2024 ($1,200.00) *       │
   │                                    │
   │ * Last day of shorter month        │
   └────────────────────────────────────┘

4. Auto-link matches:
   - Transaction on Feb 29: Matches Feb 29 instance ✅
   - Transaction on Feb 28 (non-leap): Matches within ±3 day window ✅
```

---

### Edge Case 2: Multiple Transactions Match Same Expected Instance

**Scenario:** Series expects Netflix on Feb 15. Two transactions arrive: Feb 14 (pending) and Feb 16 (posted).

**System Behavior:**

```
1. First transaction arrives (Feb 14, pending):
   - InstanceTracker: Matches Feb 15 expected instance
   - Creates link: status="matched", date variance=-1 day
   - Instance marked as "paid"

2. Second transaction arrives (Feb 16, posted):
   - InstanceTracker: Finds Feb 15 instance already linked
   - Skips auto-link (prevents duplicate)
   - Logs: "Instance already linked to txn_12345"

3. User can manually unlink and relink if incorrect:
   Series detail view shows:
   ┌────────────────────────────────────┐
   │ Feb 2024              ✅ Paid      │
   │ Expected: Feb 15, 2024 ($15.99)    │
   │ Actual: Feb 14, 2024 ($15.99)      │
   │ Status: Pending                    │
   │                                    │
   │ [Unlink] [View Transaction]        │
   └────────────────────────────────────┘

4. User clicks "Unlink":
   - Instance link removed
   - Instance status → "upcoming" (waiting for match)
   - User can now link Feb 16 transaction instead
```

---

### Edge Case 3: Series Created After Transactions Exist (Backfill)

**Scenario:** User has 12 months of Netflix transactions (Jan-Dec 2024). User creates series on Dec 31, 2024.

**System Behavior:**

```
1. User creates series on Dec 31, 2024:
   - Start date: Jan 1, 2024
   - Expected: $15.99 monthly on day 15

2. System generates expected instances:
   - Jan 15, 2024 → Dec 15, 2024 (12 instances)
   - All status: "upcoming" initially

3. Auto-link runs for FUTURE transactions only:
   - Jan 15, 2025 transaction → Auto-links ✅
   - Past transactions (Jan-Dec 2024) → NOT auto-linked

4. User sees series with many "missing" instances:
   ┌────────────────────────────────────┐
   │ 📅 Netflix              $15.99     │
   │ 🔴 Missing: 11 instances           │
   │ Jan 2024 - Nov 2024                │
   │                                    │
   │ [Backfill Past Transactions]       │
   └────────────────────────────────────┘

5. User clicks "Backfill Past Transactions":
   - Backfill dialog opens
   - System scans past transactions (Jan-Dec 2024)
   - Finds 12 matching Netflix transactions
   - Presents for confirmation:
     ┌────────────────────────────────────┐
     │ Found 12 matching transactions     │
     │                                    │
     │ ☑ Jan 15, 2024 • NETFLIX.COM       │
     │   -$15.99                          │
     │                                    │
     │ ☑ Feb 15, 2024 • NETFLIX.COM       │
     │   -$15.99                          │
     │                                    │
     │ [Select All] [Deselect All]        │
     │                                    │
     │ [Cancel]      [Link Selected (12)] │
     └────────────────────────────────────┘

6. User confirms:
   - 12 instances linked
   - Status: "🔴 Missing" → "✅ Paid"
```

---

### Edge Case 4: Amount Variance Outside Tolerance (Force Link)

**Scenario:** Series "Rent $1,200 ±$50". Transaction arrives at -$1,300 (landlord raised rent by $100).

**System Behavior:**

```
1. Transaction normalized:
   - Date: Nov 1, 2024
   - Amount: -$1,300
   - Counterparty: Landlord LLC
   - Account: BofA Checking

2. InstanceTracker attempts auto-link:
   - Account match: ✅
   - Counterparty match: ✅
   - Date match: ✅ (Nov 1 expected)
   - Amount tolerance: ❌
     Expected: $1,200 ±$50 ($1,150-$1,250)
     Actual: $1,300
     Variance: -$100 (exceeds tolerance)
   - Auto-link: FAILS

3. Series card shows alert:
   ┌────────────────────────────────────┐
   │ 📅 Rent - Monthly      $1,200.00   │
   │ ⚠️  Possible match requires review │
   │                                    │
   │ Transaction: Nov 1, 2024 ($1,300)  │
   │ Variance: +$100 (exceeds ±$50)     │
   │                                    │
   │ [Force Link] [Update Expected]     │
   │ [Ignore]                           │
   └────────────────────────────────────┘

4. User clicks "Force Link":
   - Confirmation dialog appears
   - User confirms
   - Instance created with status="variance"
   - Variance logged: +$100

5. User clicks "Update Expected" instead:
   - Quick update dialog opens
   - User changes expected: $1,200 → $1,300
   - Transaction auto-links ✅
   - Future instances expect $1,300
```

---

### Edge Case 5: Counterparty Merged After Series Creation

**Scenario:** Series "Uber Eats" linked to counterparty `cpty_uber_eats_1`. User merges `cpty_uber_eats_1` into `cpty_uber_1`.

**System Behavior:**

```
1. Original series:
   - Series ID: series_uber_eats_1
   - Counterparty ID: cpty_uber_eats_1
   - Name: "Uber Eats"

2. User merges counterparties:
   - cpty_uber_eats_1 → merged_into: cpty_uber_1
   - Alias: "Uber Eats" → "Uber"

3. Series.counterparty_id remains unchanged:
   - Still references: cpty_uber_eats_1
   - System resolves to canonical: cpty_uber_1

4. Auto-link continues to work:
   - Transaction arrives: Counterparty="UBER EATS"
   - CounterpartyMatcher checks:
     - Canonical: cpty_uber_1 ✅
     - Merged: cpty_uber_eats_1 ✅
     - Alias: "UBER EATS" ✅
   - Match found → Auto-link succeeds ✅

5. Series display:
   ┌────────────────────────────────────┐
   │ 📅 Uber Eats Delivery   $25.00    │
   │ Chase Credit • Uber (was Uber Eats)│
   │                                    │
   │ ⓘ Counterparty merged with Uber    │
   └────────────────────────────────────┘
```

---

### Edge Case 6: Zero-Amount Series (Informational Tracking)

**Scenario:** User wants to track "Paycheck (Direct Deposit)" but amount varies ($4,500-$5,000).

**System Behavior:**

```
1. User creates series:
   - Name: "Paycheck (Direct Deposit)"
   - Expected amount: $0.00 (special case)
   - Tolerance: $99,999 (effectively infinite)
   - Account: BofA Checking
   - Counterparty: Acme Corp
   - Frequency: Monthly on last Friday

2. System allows zero amount:
   ┌────────────────────────────────────┐
   │ Expected Amount *                  │
   │ [$0.00___________________________] │
   │                                    │
   │ Tolerance                          │
   │ [$99,999.00______________________] │
   │                                    │
   │ ⓘ Zero amount with large tolerance │
   │   tracks occurrence, not amount    │
   └────────────────────────────────────┘

3. Auto-link behavior:
   - Matches on: Counterparty + Account + Date
   - Ignores: Amount (tolerance effectively infinite)
   - Links any amount from Acme Corp

4. Series card shows:
   ┌────────────────────────────────────┐
   │ 📅 Paycheck            Amount varies│
   │ BofA Checking • Acme Corp          │
   │ Monthly on last Friday             │
   │                                    │
   │ ✅ Paid on time                    │
   │ Last: Nov 8, 2024 ($4,732.50)      │
   │ Next: Dec 6, 2024                  │
   │                                    │
   │ [View History] [Edit]              │
   └────────────────────────────────────┘

5. Instance history shows actual amounts:
   - Nov 2024: $4,732.50 ✅
   - Oct 2024: $5,123.00 ✅
   - Sep 2024: $4,890.00 ✅
```

---

## Performance Expectations

| Action | Target | Notes |
|--------|--------|-------|
| Load series list (≤10 series) | p95 < 400ms | Fetch series + latest instance status |
| Load series list (50 series) | p95 < 800ms | With virtual scrolling |
| Create series | p95 < 300ms | DB insert + generate 12 expected instances |
| Edit series | p95 < 250ms | DB update + recalculate future instances |
| Archive series | p95 < 300ms | Update status + set end_date |
| Auto-link transaction | p95 < 5s | Background process after normalization |
| Manual link transaction | p95 < 400ms | Create instance + update status |
| Load series detail (12 months) | p95 < 500ms | Fetch 12 instances with transaction details |
| Search filter (keystroke) | < 50ms | Client-side filtering with 200ms debounce |
| SeriesSelector dropdown open | < 150ms | Cached series list |
| Backfill past transactions (100) | < 10s | Batch processing with progress indicator |

---

## Accessibility Compliance

### WCAG 2.2 Level AA Requirements

**Screen Reader Compatibility:**

```
Series card announcement:
"Series card. Netflix. Subscription. $15.99 per month.
Monthly on day 15. BofA Credit. Netflix.
Status: Missing, 3 days overdue.
Expected: November 15, 2024. No transaction found.
Link Transaction button. Mark Skipped button. Edit button."

Empty state announcement:
"No series registered. Track Recurring Payments.
Create series for subscriptions, bills, and recurring income.
Button: Create First Series."

Create modal announcement:
"Dialog. Create Series. Step 1 of 2: Basic Information.
Form with 5 fields. Series Name, required. Account, required..."

Success toast announcement:
"Alert. Series 'OpenAI ChatGPT Plus' created.
Next expected: February 5, 2024, $20.00."

Missing payment alert:
"Alert. Series Netflix. Missing payment. 3 days overdue.
Expected: November 15, 2024. Amount: $15.99."
```

**Keyboard Navigation:**

```
Tab order on Series Manager:
1. Search field
2. Filter dropdown
3. Status filter dropdown
4. "Show archived" checkbox
5. "New Series" button
6. First series card (focus outline)
7. "Link Transaction" button (if missing status)
8. "Mark Skipped" button (if missing status)
9. "View History" button
10. "Edit" button on first card
11. "Archive" button on first card
12. Second series card
...

Modal tab order (Create Series):
1. Series Name field (auto-focused)
2. Account dropdown
3. Counterparty dropdown
4. Expected Amount field
5. Tolerance field
6. "Next: Configure Schedule" button
7. Cancel button
Tab from last → cycles to first
```

**Color Contrast:**

```
Status badges:
- Missing (red #cc0000 / white): 9.1:1 ✅ (AAA)
- Variance (yellow #b8860b / black): 6.2:1 ✅ (AA)
- Paid (green #00aa00 / white): 4.8:1 ✅ (AA)
- Upcoming (blue #0066cc / white): 8.2:1 ✅ (AAA)

Text on white background:
- Primary text (#1a1a1a): 15.8:1 ✅ (AAA)
- Secondary text (#666666): 5.7:1 ✅ (AA)
- Disabled text (#999999): 3.5:1 ⚠️ (AA Large only)

Button states:
- Primary button (blue #0066cc / white): 8.2:1 ✅
- Danger button (red #cc0000 / white): 9.1:1 ✅
- Warning button (yellow #b8860b / white): 6.2:1 ✅
```

**Focus Indicators:**

```
Default focus (keyboard):
border: 2px solid #0066cc;
outline: 2px solid #0066cc;
outline-offset: 2px;
(Contrast ratio: 8.2:1 ✅)

High contrast mode:
border: 3px solid CanvasText;
outline: 3px solid Highlight;

Series card focus:
box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.5);
```

**ARIA Labels:**

```html
<!-- Series card -->
<div
  role="article"
  aria-label="Netflix series card. Missing payment, 3 days overdue."
>
  <h3>Netflix</h3>
  <p aria-label="Expected amount">$15.99</p>
  <p aria-label="Frequency">Monthly on day 15</p>
  <p aria-label="Account">BofA Credit</p>
  <p aria-label="Counterparty">Netflix</p>

  <div
    role="status"
    aria-live="polite"
    aria-label="Missing payment, 3 days overdue"
  >
    🔴 Missing (3 days overdue)
  </div>

  <button
    aria-label="Link transaction to Netflix series"
  >
    Link Transaction
  </button>

  <button
    aria-label="Mark Netflix payment as skipped"
  >
    Mark Skipped
  </button>

  <button
    aria-label="Edit Netflix series"
  >
    Edit
  </button>
</div>

<!-- SeriesSelector dropdown -->
<select
  aria-label="Select series to link transaction"
  aria-describedby="series-help"
>
  <optgroup label="Suggested">
    <option>Netflix ($15.99 • Monthly)</option>
  </optgroup>
  <optgroup label="Subscriptions">
    <option>Spotify Premium ($9.99 • Monthly)</option>
  </optgroup>
</select>
<span id="series-help" class="sr-only">
  Link this transaction to a recurring series for automatic tracking
</span>

<!-- Create modal -->
<dialog
  role="dialog"
  aria-labelledby="create-series-title"
  aria-describedby="create-series-description"
  aria-modal="true"
>
  <h2 id="create-series-title">Create Series</h2>
  <p id="create-series-description">
    Step 1 of 2: Basic Information
  </p>
  ...
</dialog>
```

---

## Decision Points

### When to archive vs delete series?

**Archive (default recommendation):**
- Series has ANY linked instances (transaction history)
- Series may resume in future (gym membership pause)
- Historical tracking needed for reports
- User uncertain about permanent deletion

**Delete (destructive action):**
- Series created by mistake (zero instances)
- Duplicate series (zero instances)
- Test series in sandbox/development
- User explicitly requests permanent deletion

**System enforcement:**
```javascript
// API validation
function deleteSeries(seriesId) {
  const instanceCount = getInstanceCount(seriesId);

  if (instanceCount > 0) {
    throw new Error(
      `Cannot delete series with ${instanceCount} linked instances. ` +
      `Archive instead to preserve history.`
    );
  }

  // Only allow delete if zero instances
  performHardDelete(seriesId);
}
```

**UI Behavior:**
- "Delete" button only appears if series has ZERO instances
- Otherwise, show "Archive" button only
- Deleted series go to trash (30-day recovery window)

---

### When to suggest series based on transactions?

**Auto-suggest series creation when:**
- 3+ transactions to same counterparty
- Similar amounts (variance ≤ 20%)
- Regular intervals (weekly, monthly detected)
- No existing series for counterparty

**Suggestion UI:**

```
Transaction List shows banner:
┌────────────────────────────────────────────┐
│ 💡 Create series for recurring payment?   │
├────────────────────────────────────────────┤
│ We found 5 recurring Netflix payments:    │
│ • $15.99 on 15th of each month             │
│ • Jan - May 2024                           │
│                                            │
│ [Create "Netflix" Series] [Dismiss]        │
└────────────────────────────────────────────┘

Clicking "Create 'Netflix' Series":
- Pre-fills series form with detected values
- User can adjust before creating
```

---

### When to show tolerance recommendations?

**Tolerance guidelines by category:**

```
Subscriptions: ±$2.00 (10-15%)
- Usually fixed pricing
- Occasional price increases

Bills (Utilities): ±$50.00 (30-50%)
- Variable usage (electric, water)
- Seasonal changes

Rent: ±$0.00 (0%)
- Fixed amount
- Changes require lease amendment

Salary: ±$500.00 (10-15%)
- Bonuses, overtime variations
- Pre-tax deductions vary

Recommendation UI:
┌────────────────────────────────────────────┐
│ Tolerance (± amount)                       │
│ [$2.00_______________________________]     │
│                                            │
│ Suggested by category:                     │
│ • Subscriptions: ±$2.00 (recommended)      │
│ • Bills: ±$50.00                           │
│ • Rent: ±$0.00                             │
│ • Salary: ±$500.00                         │
└────────────────────────────────────────────┘
```

---

**Next vertical:** 3.4 Tax Categorization — Closed registry of tax categories for transaction classification.
